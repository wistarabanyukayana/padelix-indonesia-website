module.exports=[1564,(a,b,c)=>{"use strict";var d={};function e(a,b){!b.unsigned&&--a;let c=b.unsigned?0:-Math.pow(2,a),d=Math.pow(2,a)-1,e=b.moduloBitLength?Math.pow(2,b.moduloBitLength):Math.pow(2,a),f=b.moduloBitLength?Math.pow(2,b.moduloBitLength-1):Math.pow(2,a-1);return function(a,g){g||(g={});let h=+a;if(g.enforceRange){if(!Number.isFinite(h))throw TypeError("Argument is not a finite number");if((h=(h<0?-1:1)*Math.floor(Math.abs(h)))<c||h>d)throw TypeError("Argument is not in byte range");return h}if(!isNaN(h)&&g.clamp){var i;return(h=(i=h)%1==.5&&(1&i)==0?Math.floor(i):Math.round(i))<c&&(h=c),h>d&&(h=d),h}if(!Number.isFinite(h)||0===h)return 0;if(h=(h<0?-1:1)*Math.floor(Math.abs(h))%e,!b.unsigned&&h>=f)return h-e;if(b.unsigned){if(h<0)h+=e;else if(-0===h)return 0}return h}}b.exports=d,d.void=function(){},d.boolean=function(a){return!!a},d.byte=e(8,{unsigned:!1}),d.octet=e(8,{unsigned:!0}),d.short=e(16,{unsigned:!1}),d["unsigned short"]=e(16,{unsigned:!0}),d.long=e(32,{unsigned:!1}),d["unsigned long"]=e(32,{unsigned:!0}),d["long long"]=e(32,{unsigned:!1,moduloBitLength:64}),d["unsigned long long"]=e(32,{unsigned:!0,moduloBitLength:64}),d.double=function(a){let b=+a;if(!Number.isFinite(b))throw TypeError("Argument is not a finite floating-point value");return b},d["unrestricted double"]=function(a){let b=+a;if(isNaN(b))throw TypeError("Argument is NaN");return b},d.float=d.double,d["unrestricted float"]=d["unrestricted double"],d.DOMString=function(a,b){return(b||(b={}),b.treatNullAsEmptyString&&null===a)?"":String(a)},d.ByteString=function(a,b){let c,d=String(a);for(let a=0;void 0!==(c=d.codePointAt(a));++a)if(c>255)throw TypeError("Argument is not a valid bytestring");return d},d.USVString=function(a){let b=String(a),c=b.length,d=[];for(let a=0;a<c;++a){let e=b.charCodeAt(a);if(e<55296||e>57343)d.push(String.fromCodePoint(e));else if(56320<=e&&e<=57343)d.push(String.fromCodePoint(65533));else if(a===c-1)d.push(String.fromCodePoint(65533));else{let c=b.charCodeAt(a+1);if(56320<=c&&c<=57343){let b=1023&e,f=1023&c;d.push(String.fromCodePoint(65536+1024*b+f)),++a}else d.push(String.fromCodePoint(65533))}}return d.join("")},d.Date=function(a,b){if(!(a instanceof Date))throw TypeError("Argument is not a Date object");if(!isNaN(a))return a},d.RegExp=function(a,b){return a instanceof RegExp||(a=new RegExp(a)),a}},71354,(a,b,c)=>{"use strict";b.exports.mixin=function(a,b){let c=Object.getOwnPropertyNames(b);for(let d=0;d<c.length;++d)Object.defineProperty(a,c[d],Object.getOwnPropertyDescriptor(b,c[d]))},b.exports.wrapperSymbol=Symbol("wrapper"),b.exports.implSymbol=Symbol("impl"),b.exports.wrapperForImpl=function(a){return a[b.exports.wrapperSymbol]},b.exports.implForWrapper=function(a){return a[b.exports.implSymbol]}},27865,(a,b,c)=>{"use strict";var d=a.r(92097),e=a.r(79966),f={TRANSITIONAL:0,NONTRANSITIONAL:1};function g(a){return a.split("\0").map(function(a){return a.normalize("NFC")}).join("\0")}function h(a){for(var b=0,c=e.length-1;b<=c;){var d=Math.floor((b+c)/2),f=e[d];if(f[0][0]<=a&&f[0][1]>=a)return f;f[0][0]>a?c=d-1:b=d+1}return null}var i=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;function j(a){return a.replace(i,"_").length}var k=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E4-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u192B\u1930-\u193B\u19B0-\u19C0\u19C8\u19C9\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2D]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC7F-\uDC82\uDCB0-\uDCBA\uDD00-\uDD02\uDD27-\uDD34\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDE2C-\uDE37\uDEDF-\uDEEA\uDF01-\uDF03\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDE30-\uDE40\uDEAB-\uDEB7]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF51-\uDF7E\uDF8F-\uDF92]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD83A[\uDCD0-\uDCD6]|\uDB40[\uDD00-\uDDEF]/;function l(a,b,c){var e=function(a,b,c){for(var d=!1,e="",g=j(a),i=0;i<g;++i){var k=a.codePointAt(i),l=h(k);switch(l[1]){case"disallowed":d=!0,e+=String.fromCodePoint(k);break;case"ignored":break;case"mapped":e+=String.fromCodePoint.apply(String,l[2]);break;case"deviation":c===f.TRANSITIONAL?e+=String.fromCodePoint.apply(String,l[2]):e+=String.fromCodePoint(k);break;case"valid":e+=String.fromCodePoint(k);break;case"disallowed_STD3_mapped":b?(d=!0,e+=String.fromCodePoint(k)):e+=String.fromCodePoint.apply(String,l[2]);break;case"disallowed_STD3_valid":b&&(d=!0),e+=String.fromCodePoint(k)}}return{string:e,error:d}}(a,b,c);e.string=g(e.string);for(var i=e.string.split("."),m=0;m<i.length;++m)try{var n=function(a,b){"xn--"===a.substr(0,4)&&(a=d.toUnicode(a),f.NONTRANSITIONAL);var c=!1;(g(a)!==a||"-"===a[3]&&"-"===a[4]||"-"===a[0]||"-"===a[a.length-1]||-1!==a.indexOf(".")||0===a.search(k))&&(c=!0);for(var e=j(a),i=0;i<e;++i){var m=h(a.codePointAt(i));if(l===f.TRANSITIONAL&&"valid"!==m[1]||l===f.NONTRANSITIONAL&&"valid"!==m[1]&&"deviation"!==m[1]){c=!0;break}}return{label:a,error:c}}(i[m]);i[m]=n.label,e.error=e.error||n.error}catch(a){e.error=!0}return{string:i.join("."),error:e.error}}b.exports.toASCII=function(a,b,c,e){var f=l(a,b,c),g=f.string.split(".");if(g=g.map(function(a){try{return d.toASCII(a)}catch(b){return f.error=!0,a}}),e){var h=g.slice(0,g.length-1).join(".").length;(h.length>253||0===h.length)&&(f.error=!0);for(var i=0;i<g.length;++i)if(g.length>63||0===g.length){f.error=!0;break}}return f.error?null:g.join(".")},b.exports.toUnicode=function(a,b){var c=l(a,b,f.NONTRANSITIONAL);return{domain:c.string,error:c.error}},b.exports.PROCESSING_OPTIONS=f},54849,(a,b,c)=>{"use strict";let d=a.r(92097),e=a.r(27865),f={ftp:21,file:null,gopher:70,http:80,https:443,ws:80,wss:443},g=Symbol("failure");function h(a){return d.ucs2.decode(a).length}function i(a,b){let c=a[b];return isNaN(c)?void 0:String.fromCodePoint(c)}function j(a){return a>=48&&a<=57}function k(a){return a>=65&&a<=90||a>=97&&a<=122}function l(a){return j(a)||a>=65&&a<=70||a>=97&&a<=102}function m(a){return"."===a||"%2e"===a.toLowerCase()}function n(a){return 2===a.length&&k(a.codePointAt(0))&&(":"===a[1]||"|"===a[1])}function o(a){return void 0!==f[a]}function p(a){return o(a.scheme)}function q(a){let b=a.toString(16).toUpperCase();return 1===b.length&&(b="0"+b),"%"+b}function r(a){return a<=31||a>126}let s=new Set([32,34,35,60,62,63,96,123,125]);function t(a){return r(a)||s.has(a)}let u=new Set([47,58,59,61,64,91,92,93,94,124]);function v(a){return t(a)||u.has(a)}function w(a,b){let c=String.fromCodePoint(a);if(b(a)){let a=new Buffer(c),b="";for(let c=0;c<a.length;++c)b+=q(a[c]);return b}return c}function x(a,b){if("["===a[0])return"]"!==a[a.length-1]?g:function(a){let b=[0,0,0,0,0,0,0,0],c=0,e=null,f=0;if(58===(a=d.ucs2.decode(a))[f]){if(58!==a[f+1])return g;f+=2,e=++c}for(;f<a.length;){if(8===c)return g;if(58===a[f]){if(null!==e)return g;++f,e=++c;continue}let d=0,h=0;for(;h<4&&l(a[f]);)d=16*d+parseInt(i(a,f),16),++f,++h;if(46===a[f]){if(0===h||(f-=h,c>6))return g;let d=0;for(;void 0!==a[f];){let e=null;if(d>0)if(46!==a[f]||!(d<4))return g;else++f;if(!j(a[f]))return g;for(;j(a[f]);){let b=parseInt(i(a,f));if(null===e)e=b;else{if(0===e)return g;e=10*e+b}if(e>255)return g;++f}b[c]=256*b[c]+e,(2==++d||4===d)&&++c}if(4!==d)return g;break}if(58===a[f]){if(void 0===a[++f])return g}else if(void 0!==a[f])return g;b[c]=d,++c}if(null!==e){let a=c-e;for(c=7;0!==c&&a>0;){let d=b[e+a-1];b[e+a-1]=b[c],b[c]=d,--c,--a}}else if(null===e&&8!==c)return g;return b}(a.substring(1,a.length-1));if(!b){var c=a;if(-1!==c.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|\/|:|\?|@|\[|\\|\]/))return g;let b="",e=d.ucs2.decode(c);for(let a=0;a<e.length;++a)b+=w(e[a],r);return b}let f=function(a){let b=new Buffer(a),c=[];for(let a=0;a<b.length;++a)37!==b[a]?c.push(b[a]):37===b[a]&&l(b[a+1])&&l(b[a+2])?(c.push(parseInt(b.slice(a+1,a+3).toString(),16)),a+=2):c.push(b[a]);return new Buffer(c).toString()}(a),h=e.toASCII(f,!1,e.PROCESSING_OPTIONS.NONTRANSITIONAL,!1);if(null===h||-1!==h.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|%|\/|:|\?|@|\[|\\|\]/))return g;let k=function(a){let b=a.split(".");if(""===b[b.length-1]&&b.length>1&&b.pop(),b.length>4)return a;let c=[];for(let d of b){if(""===d)return a;let b=function(a){let b=10;return(a.length>=2&&"0"===a.charAt(0)&&"x"===a.charAt(1).toLowerCase()?(a=a.substring(2),b=16):a.length>=2&&"0"===a.charAt(0)&&(a=a.substring(1),b=8),""===a)?0:(10===b?/[^0-9]/:16===b?/[^0-9A-Fa-f]/:/[^0-7]/).test(a)?g:parseInt(a,b)}(d);if(b===g)return a;c.push(b)}for(let a=0;a<c.length-1;++a)if(c[a]>255)return g;if(c[c.length-1]>=Math.pow(256,5-c.length))return g;let d=c.pop(),e=0;for(let a of c)d+=a*Math.pow(256,3-e),++e;return d}(h);return"number"==typeof k||k===g?k:h}function y(a){if("number"==typeof a){let b="",c=a;for(let a=1;a<=4;++a)b=String(c%256)+b,4!==a&&(b="."+b),c=Math.floor(c/256);return b}return a instanceof Array?"["+function(a){let b="",c=function(a){let b=null,c=1,d=null,e=0;for(let f=0;f<a.length;++f)0!==a[f]?(e>c&&(b=d,c=e),d=null,e=0):(null===d&&(d=f),++e);return e>c&&(b=d,c=e),{idx:b,len:c}}(a).idx,d=!1;for(let e=0;e<=7;++e)if(!d||0!==a[e]){if(d&&(d=!1),c===e){b+=0===e?"::":":",d=!0;continue}b+=a[e].toString(16),7!==e&&(b+=":")}return b}(a)+"]":a}function z(a){var b;let c=a.path;0===c.length||"file"===a.scheme&&1===c.length&&(b=c[0],/^[A-Za-z]:$/.test(b))||c.pop()}function A(a){return""!==a.username||""!==a.password}function B(a,b,c,e,f){if(this.pointer=0,this.input=a,this.base=b||null,this.encodingOverride=c||"utf-8",this.stateOverride=f,this.url=e,this.failure=!1,this.parseError=!1,!this.url){this.url={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null,cannotBeABaseURL:!1};let a=this.input.replace(/^[\u0000-\u001F\u0020]+|[\u0000-\u001F\u0020]+$/g,"");a!==this.input&&(this.parseError=!0),this.input=a}let h=this.input.replace(/\u0009|\u000A|\u000D/g,"");for(h!==this.input&&(this.parseError=!0),this.input=h,this.state=f||"scheme start",this.buffer="",this.atFlag=!1,this.arrFlag=!1,this.passwordTokenSeenFlag=!1,this.input=d.ucs2.decode(this.input);this.pointer<=this.input.length;++this.pointer){let a=this.input[this.pointer],b=isNaN(a)?void 0:String.fromCodePoint(a),c=this["parse "+this.state](a,b);if(c){if(c===g){this.failure=!0;break}}else break}}B.prototype["parse scheme start"]=function(a,b){if(k(a))this.buffer+=b.toLowerCase(),this.state="scheme";else{if(this.stateOverride)return this.parseError=!0,g;this.state="no scheme",--this.pointer}return!0},B.prototype["parse scheme"]=function(a,b){if(k(a)||j(a)||43===a||45===a||46===a)this.buffer+=b.toLowerCase();else if(58===a){if(this.stateOverride&&(p(this.url)&&!o(this.buffer)||!p(this.url)&&o(this.buffer)||(A(this.url)||null!==this.url.port)&&"file"===this.buffer||"file"===this.url.scheme&&(""===this.url.host||null===this.url.host))||(this.url.scheme=this.buffer,this.buffer="",this.stateOverride))return!1;"file"===this.url.scheme?((47!==this.input[this.pointer+1]||47!==this.input[this.pointer+2])&&(this.parseError=!0),this.state="file"):p(this.url)&&null!==this.base&&this.base.scheme===this.url.scheme?this.state="special relative or authority":p(this.url)?this.state="special authority slashes":47===this.input[this.pointer+1]?(this.state="path or authority",++this.pointer):(this.url.cannotBeABaseURL=!0,this.url.path.push(""),this.state="cannot-be-a-base-URL path")}else{if(this.stateOverride)return this.parseError=!0,g;this.buffer="",this.state="no scheme",this.pointer=-1}return!0},B.prototype["parse no scheme"]=function(a){return null===this.base||this.base.cannotBeABaseURL&&35!==a?g:(this.base.cannotBeABaseURL&&35===a?(this.url.scheme=this.base.scheme,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.url.cannotBeABaseURL=!0,this.state="fragment"):("file"===this.base.scheme?this.state="file":this.state="relative",--this.pointer),!0)},B.prototype["parse special relative or authority"]=function(a){return 47===a&&47===this.input[this.pointer+1]?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="relative",--this.pointer),!0},B.prototype["parse path or authority"]=function(a){return 47===a?this.state="authority":(this.state="path",--this.pointer),!0},B.prototype["parse relative"]=function(a){return this.url.scheme=this.base.scheme,isNaN(a)?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query):47===a?this.state="relative slash":63===a?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query="",this.state="query"):35===a?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.state="fragment"):p(this.url)&&92===a?(this.parseError=!0,this.state="relative slash"):(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(0,this.base.path.length-1),this.state="path",--this.pointer),!0},B.prototype["parse relative slash"]=function(a){return p(this.url)&&(47===a||92===a)?(92===a&&(this.parseError=!0),this.state="special authority ignore slashes"):47===a?this.state="authority":(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.state="path",--this.pointer),!0},B.prototype["parse special authority slashes"]=function(a){return 47===a&&47===this.input[this.pointer+1]?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="special authority ignore slashes",--this.pointer),!0},B.prototype["parse special authority ignore slashes"]=function(a){return 47!==a&&92!==a?(this.state="authority",--this.pointer):this.parseError=!0,!0},B.prototype["parse authority"]=function(a,b){if(64===a){this.parseError=!0,this.atFlag&&(this.buffer="%40"+this.buffer),this.atFlag=!0;let a=h(this.buffer);for(let b=0;b<a;++b){let a=this.buffer.codePointAt(b);if(58===a&&!this.passwordTokenSeenFlag){this.passwordTokenSeenFlag=!0;continue}let c=w(a,v);this.passwordTokenSeenFlag?this.url.password+=c:this.url.username+=c}this.buffer=""}else if(isNaN(a)||47===a||63===a||35===a||p(this.url)&&92===a){if(this.atFlag&&""===this.buffer)return this.parseError=!0,g;this.pointer-=h(this.buffer)+1,this.buffer="",this.state="host"}else this.buffer+=b;return!0},B.prototype["parse hostname"]=B.prototype["parse host"]=function(a,b){if(this.stateOverride&&"file"===this.url.scheme)--this.pointer,this.state="file host";else if(58!==a||this.arrFlag)if(isNaN(a)||47===a||63===a||35===a||p(this.url)&&92===a){if(--this.pointer,p(this.url)&&""===this.buffer)return this.parseError=!0,g;if(this.stateOverride&&""===this.buffer&&(A(this.url)||null!==this.url.port))return this.parseError=!0,!1;let a=x(this.buffer,p(this.url));if(a===g)return g;if(this.url.host=a,this.buffer="",this.state="path start",this.stateOverride)return!1}else 91===a?this.arrFlag=!0:93===a&&(this.arrFlag=!1),this.buffer+=b;else{if(""===this.buffer)return this.parseError=!0,g;let a=x(this.buffer,p(this.url));if(a===g)return g;if(this.url.host=a,this.buffer="",this.state="port","hostname"===this.stateOverride)return!1}return!0},B.prototype["parse port"]=function(a,b){if(j(a))this.buffer+=b;else{if(!(isNaN(a)||47===a||63===a||35===a||p(this.url)&&92===a)&&!this.stateOverride)return this.parseError=!0,g;if(""!==this.buffer){let a=parseInt(this.buffer);if(a>65535)return this.parseError=!0,g;this.url.port=a===f[this.url.scheme]?null:a,this.buffer=""}if(this.stateOverride)return!1;this.state="path start",--this.pointer}return!0};let C=new Set([47,92,63,35]);B.prototype["parse file"]=function(a){if(this.url.scheme="file",47===a||92===a)92===a&&(this.parseError=!0),this.state="file slash";else if(null!==this.base&&"file"===this.base.scheme)if(isNaN(a))this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query;else if(63===a)this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query="",this.state="query";else if(35===a)this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.state="fragment";else{var b;this.input.length-this.pointer-1!=0&&(b=this.input[this.pointer+1],k(a)&&(58===b||124===b))&&(!(this.input.length-this.pointer-1>=2)||C.has(this.input[this.pointer+2]))?this.parseError=!0:(this.url.host=this.base.host,this.url.path=this.base.path.slice(),z(this.url)),this.state="path",--this.pointer}else this.state="path",--this.pointer;return!0},B.prototype["parse file slash"]=function(a){if(47===a||92===a)92===a&&(this.parseError=!0),this.state="file host";else{if(null!==this.base&&"file"===this.base.scheme){var b;2===(b=this.base.path[0]).length&&k(b.codePointAt(0))&&":"===b[1]?this.url.path.push(this.base.path[0]):this.url.host=this.base.host}this.state="path",--this.pointer}return!0},B.prototype["parse file host"]=function(a,b){if(isNaN(a)||47===a||92===a||63===a||35===a)if(--this.pointer,!this.stateOverride&&n(this.buffer))this.parseError=!0,this.state="path";else if(""===this.buffer){if(this.url.host="",this.stateOverride)return!1;this.state="path start"}else{let a=x(this.buffer,p(this.url));if(a===g)return g;if("localhost"===a&&(a=""),this.url.host=a,this.stateOverride)return!1;this.buffer="",this.state="path start"}else this.buffer+=b;return!0},B.prototype["parse path start"]=function(a){return p(this.url)?(92===a&&(this.parseError=!0),this.state="path",47!==a&&92!==a&&--this.pointer):this.stateOverride||63!==a?this.stateOverride||35!==a?void 0!==a&&(this.state="path",47!==a&&--this.pointer):(this.url.fragment="",this.state="fragment"):(this.url.query="",this.state="query"),!0},B.prototype["parse path"]=function(a){if(isNaN(a)||47===a||p(this.url)&&92===a||!this.stateOverride&&(63===a||35===a)){var b;if((p(this.url)&&92===a&&(this.parseError=!0),".."===(b=(b=this.buffer).toLowerCase())||"%2e."===b||".%2e"===b||"%2e%2e"===b)?(z(this.url),47===a||p(this.url)&&92===a||this.url.path.push("")):m(this.buffer)&&47!==a&&!(p(this.url)&&92===a)?this.url.path.push(""):m(this.buffer)||("file"===this.url.scheme&&0===this.url.path.length&&n(this.buffer)&&(""!==this.url.host&&null!==this.url.host&&(this.parseError=!0,this.url.host=""),this.buffer=this.buffer[0]+":"),this.url.path.push(this.buffer)),this.buffer="","file"===this.url.scheme&&(void 0===a||63===a||35===a))for(;this.url.path.length>1&&""===this.url.path[0];)this.parseError=!0,this.url.path.shift();63===a&&(this.url.query="",this.state="query"),35===a&&(this.url.fragment="",this.state="fragment")}else 37!==a||l(this.input[this.pointer+1])&&l(this.input[this.pointer+2])||(this.parseError=!0),this.buffer+=w(a,t);return!0},B.prototype["parse cannot-be-a-base-URL path"]=function(a){return 63===a?(this.url.query="",this.state="query"):35===a?(this.url.fragment="",this.state="fragment"):(isNaN(a)||37===a||(this.parseError=!0),37!==a||l(this.input[this.pointer+1])&&l(this.input[this.pointer+2])||(this.parseError=!0),isNaN(a)||(this.url.path[0]=this.url.path[0]+w(a,r))),!0},B.prototype["parse query"]=function(a,b){if(isNaN(a)||!this.stateOverride&&35===a){p(this.url)&&"ws"!==this.url.scheme&&"wss"!==this.url.scheme||(this.encodingOverride="utf-8");let b=new Buffer(this.buffer);for(let a=0;a<b.length;++a)b[a]<33||b[a]>126||34===b[a]||35===b[a]||60===b[a]||62===b[a]?this.url.query+=q(b[a]):this.url.query+=String.fromCodePoint(b[a]);this.buffer="",35===a&&(this.url.fragment="",this.state="fragment")}else 37!==a||l(this.input[this.pointer+1])&&l(this.input[this.pointer+2])||(this.parseError=!0),this.buffer+=b;return!0},B.prototype["parse fragment"]=function(a){return isNaN(a)||(0===a?this.parseError=!0:(37!==a||l(this.input[this.pointer+1])&&l(this.input[this.pointer+2])||(this.parseError=!0),this.url.fragment+=w(a,r))),!0},b.exports.serializeURL=function(a,b){let c=a.scheme+":";if(null!==a.host?(c+="//",(""!==a.username||""!==a.password)&&(c+=a.username,""!==a.password&&(c+=":"+a.password),c+="@"),c+=y(a.host),null!==a.port&&(c+=":"+a.port)):null===a.host&&"file"===a.scheme&&(c+="//"),a.cannotBeABaseURL)c+=a.path[0];else for(let b of a.path)c+="/"+b;return null!==a.query&&(c+="?"+a.query),b||null===a.fragment||(c+="#"+a.fragment),c},b.exports.serializeURLOrigin=function(a){switch(a.scheme){case"blob":try{return b.exports.serializeURLOrigin(b.exports.parseURL(a.path[0]))}catch(a){return"null"}case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":var c;let d;return d=(c={scheme:a.scheme,host:a.host,port:a.port}).scheme+"://"+y(c.host),null!==c.port&&(d+=":"+c.port),d;case"file":return"file://";default:return"null"}},b.exports.basicURLParse=function(a,b){void 0===b&&(b={});let c=new B(a,b.baseURL,b.encodingOverride,b.url,b.stateOverride);return c.failure?"failure":c.url},b.exports.setTheUsername=function(a,b){a.username="";let c=d.ucs2.decode(b);for(let b=0;b<c.length;++b)a.username+=w(c[b],v)},b.exports.setThePassword=function(a,b){a.password="";let c=d.ucs2.decode(b);for(let b=0;b<c.length;++b)a.password+=w(c[b],v)},b.exports.serializeHost=y,b.exports.cannotHaveAUsernamePasswordPort=function(a){return null===a.host||""===a.host||a.cannotBeABaseURL||"file"===a.scheme},b.exports.serializeInteger=function(a){return String(a)},b.exports.parseURL=function(a,c){return void 0===c&&(c={}),b.exports.basicURLParse(a,{baseURL:c.baseURL,encodingOverride:c.encodingOverride})}},21821,(a,b,c)=>{"use strict";let d=a.r(54849);c.implementation=class{constructor(a){const b=a[0],c=a[1];let e=null;if(void 0!==c&&"failure"===(e=d.basicURLParse(c)))throw TypeError("Invalid base URL");const f=d.basicURLParse(b,{baseURL:e});if("failure"===f)throw TypeError("Invalid URL");this._url=f}get href(){return d.serializeURL(this._url)}set href(a){let b=d.basicURLParse(a);if("failure"===b)throw TypeError("Invalid URL");this._url=b}get origin(){return d.serializeURLOrigin(this._url)}get protocol(){return this._url.scheme+":"}set protocol(a){d.basicURLParse(a+":",{url:this._url,stateOverride:"scheme start"})}get username(){return this._url.username}set username(a){d.cannotHaveAUsernamePasswordPort(this._url)||d.setTheUsername(this._url,a)}get password(){return this._url.password}set password(a){d.cannotHaveAUsernamePasswordPort(this._url)||d.setThePassword(this._url,a)}get host(){let a=this._url;return null===a.host?"":null===a.port?d.serializeHost(a.host):d.serializeHost(a.host)+":"+d.serializeInteger(a.port)}set host(a){this._url.cannotBeABaseURL||d.basicURLParse(a,{url:this._url,stateOverride:"host"})}get hostname(){return null===this._url.host?"":d.serializeHost(this._url.host)}set hostname(a){this._url.cannotBeABaseURL||d.basicURLParse(a,{url:this._url,stateOverride:"hostname"})}get port(){return null===this._url.port?"":d.serializeInteger(this._url.port)}set port(a){d.cannotHaveAUsernamePasswordPort(this._url)||(""===a?this._url.port=null:d.basicURLParse(a,{url:this._url,stateOverride:"port"}))}get pathname(){return this._url.cannotBeABaseURL?this._url.path[0]:0===this._url.path.length?"":"/"+this._url.path.join("/")}set pathname(a){this._url.cannotBeABaseURL||(this._url.path=[],d.basicURLParse(a,{url:this._url,stateOverride:"path start"}))}get search(){return null===this._url.query||""===this._url.query?"":"?"+this._url.query}set search(a){let b=this._url;if(""===a){b.query=null;return}let c="?"===a[0]?a.substring(1):a;b.query="",d.basicURLParse(c,{url:b,stateOverride:"query"})}get hash(){return null===this._url.fragment||""===this._url.fragment?"":"#"+this._url.fragment}set hash(a){if(""===a){this._url.fragment=null;return}let b="#"===a[0]?a.substring(1):a;this._url.fragment="",d.basicURLParse(b,{url:this._url,stateOverride:"fragment"})}toJSON(){return this.href}}},75307,(a,b,c)=>{"use strict";let d=a.r(1564),e=a.r(71354),f=a.r(21821),g=e.implSymbol;function h(a){if(!this||this[g]||!(this instanceof h))throw TypeError("Failed to construct 'URL': Please use the 'new' operator, this DOM object constructor cannot be called as a function.");if(arguments.length<1)throw TypeError("Failed to construct 'URL': 1 argument required, but only "+arguments.length+" present.");let c=[];for(let a=0;a<arguments.length&&a<2;++a)c[a]=arguments[a];c[0]=d.USVString(c[0]),void 0!==c[1]&&(c[1]=d.USVString(c[1])),b.exports.setup(this,c)}h.prototype.toJSON=function(){if(!this||!b.exports.is(this))throw TypeError("Illegal invocation");let a=[];for(let b=0;b<arguments.length&&b<0;++b)a[b]=arguments[b];return this[g].toJSON.apply(this[g],a)},Object.defineProperty(h.prototype,"href",{get(){return this[g].href},set(a){a=d.USVString(a),this[g].href=a},enumerable:!0,configurable:!0}),h.prototype.toString=function(){if(!this||!b.exports.is(this))throw TypeError("Illegal invocation");return this.href},Object.defineProperty(h.prototype,"origin",{get(){return this[g].origin},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"protocol",{get(){return this[g].protocol},set(a){a=d.USVString(a),this[g].protocol=a},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"username",{get(){return this[g].username},set(a){a=d.USVString(a),this[g].username=a},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"password",{get(){return this[g].password},set(a){a=d.USVString(a),this[g].password=a},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"host",{get(){return this[g].host},set(a){a=d.USVString(a),this[g].host=a},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"hostname",{get(){return this[g].hostname},set(a){a=d.USVString(a),this[g].hostname=a},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"port",{get(){return this[g].port},set(a){a=d.USVString(a),this[g].port=a},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"pathname",{get(){return this[g].pathname},set(a){a=d.USVString(a),this[g].pathname=a},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"search",{get(){return this[g].search},set(a){a=d.USVString(a),this[g].search=a},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"hash",{get(){return this[g].hash},set(a){a=d.USVString(a),this[g].hash=a},enumerable:!0,configurable:!0}),b.exports={is:a=>!!a&&a[g]instanceof f.implementation,create(a,b){let c=Object.create(h.prototype);return this.setup(c,a,b),c},setup(a,b,c){c||(c={}),c.wrapper=a,a[g]=new f.implementation(b,c),a[g][e.wrapperSymbol]=a},interface:h,expose:{Window:{URL:h},Worker:{URL:h}}}},44738,(a,b,c)=>{"use strict";c.URL=a.r(75307).interface,c.serializeURL=a.r(54849).serializeURL,c.serializeURLOrigin=a.r(54849).serializeURLOrigin,c.basicURLParse=a.r(54849).basicURLParse,c.setTheUsername=a.r(54849).setTheUsername,c.setThePassword=a.r(54849).setThePassword,c.serializeHost=a.r(54849).serializeHost,c.serializeInteger=a.r(54849).serializeInteger,c.parseURL=a.r(54849).parseURL},1392,(a,b,c)=>{function d(a,b,c,d){return Math.round(a/c)+" "+d+(b>=1.5*c?"s":"")}b.exports=function(a,b){b=b||{};var c,e,f,g,h=typeof a;if("string"===h&&a.length>0){var i=a;if(!((i=String(i)).length>100)){var j=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i);if(j){var k=parseFloat(j[1]);switch((j[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*k;case"weeks":case"week":case"w":return 6048e5*k;case"days":case"day":case"d":return 864e5*k;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*k;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*k;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*k;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return k;default:break}}}return}if("number"===h&&isFinite(a)){return b.long?(e=Math.abs(c=a))>=864e5?d(c,e,864e5,"day"):e>=36e5?d(c,e,36e5,"hour"):e>=6e4?d(c,e,6e4,"minute"):e>=1e3?d(c,e,1e3,"second"):c+" ms":(g=Math.abs(f=a))>=864e5?Math.round(f/864e5)+"d":g>=36e5?Math.round(f/36e5)+"h":g>=6e4?Math.round(f/6e4)+"m":g>=1e3?Math.round(f/1e3)+"s":f+"ms"}throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},81001,(a,b,c)=>{"use strict";var d=a.r(24361),e=a.r(1392);b.exports=function(a){if("number"==typeof a)return a;var b=e(a);return void 0===b&&console.warn(Error(d.format("humanize-ms(%j) result undefined",a)).stack),b}},4571,(a,b,c)=>{"use strict";b.exports={CURRENT_ID:Symbol("agentkeepalive#currentId"),CREATE_ID:Symbol("agentkeepalive#createId"),INIT_SOCKET:Symbol("agentkeepalive#initSocket"),CREATE_HTTPS_CONNECTION:Symbol("agentkeepalive#createHttpsConnection"),SOCKET_CREATED_TIME:Symbol("agentkeepalive#socketCreatedTime"),SOCKET_NAME:Symbol("agentkeepalive#socketName"),SOCKET_REQUEST_COUNT:Symbol("agentkeepalive#socketRequestCount"),SOCKET_REQUEST_FINISHED_COUNT:Symbol("agentkeepalive#socketRequestFinishedCount")}},18855,(a,b,c)=>{"use strict";let d=a.r(21517).Agent,e=a.r(81001),f=a.r(24361).debuglog("agentkeepalive"),{INIT_SOCKET:g,CURRENT_ID:h,CREATE_ID:i,SOCKET_CREATED_TIME:j,SOCKET_NAME:k,SOCKET_REQUEST_COUNT:l,SOCKET_REQUEST_FINISHED_COUNT:m}=a.r(4571),n=1,o=parseInt(process.version.split(".",1)[0].substring(1));function p(a){console.log("[agentkeepalive:deprecated] %s",a)}function q(a){return a.timeout||a._idleTimeout}function r(a){let b={};for(let c in a)b[c]=a[c].length;return b}o>=11&&o<=12?n=2:o>=13&&(n=3),b.exports=class extends d{constructor(a){(a=a||{}).keepAlive=!1!==a.keepAlive,void 0===a.freeSocketTimeout&&(a.freeSocketTimeout=4e3),a.keepAliveTimeout&&(p("options.keepAliveTimeout is deprecated, please use options.freeSocketTimeout instead"),a.freeSocketTimeout=a.keepAliveTimeout,delete a.keepAliveTimeout),a.freeSocketKeepAliveTimeout&&(p("options.freeSocketKeepAliveTimeout is deprecated, please use options.freeSocketTimeout instead"),a.freeSocketTimeout=a.freeSocketKeepAliveTimeout,delete a.freeSocketKeepAliveTimeout),void 0===a.timeout&&(a.timeout=Math.max(2*a.freeSocketTimeout,8e3)),a.timeout=e(a.timeout),a.freeSocketTimeout=e(a.freeSocketTimeout),a.socketActiveTTL=a.socketActiveTTL?e(a.socketActiveTTL):0,super(a),this[h]=0,this.createSocketCount=0,this.createSocketCountLastCheck=0,this.createSocketErrorCount=0,this.createSocketErrorCountLastCheck=0,this.closeSocketCount=0,this.closeSocketCountLastCheck=0,this.errorSocketCount=0,this.errorSocketCountLastCheck=0,this.requestCount=0,this.requestCountLastCheck=0,this.timeoutSocketCount=0,this.timeoutSocketCountLastCheck=0,this.on("free",a=>{let b=this.calcSocketTimeout(a);b>0&&a.timeout!==b&&a.setTimeout(b)})}get freeSocketKeepAliveTimeout(){return p("agent.freeSocketKeepAliveTimeout is deprecated, please use agent.options.freeSocketTimeout instead"),this.options.freeSocketTimeout}get timeout(){return p("agent.timeout is deprecated, please use agent.options.timeout instead"),this.options.timeout}get socketActiveTTL(){return p("agent.socketActiveTTL is deprecated, please use agent.options.socketActiveTTL instead"),this.options.socketActiveTTL}calcSocketTimeout(a){let b=this.options.freeSocketTimeout,c=this.options.socketActiveTTL;if(c){let d=c-(Date.now()-a[j]);if(d<=0)return d;b&&d<b&&(b=d)}if(b)return a.freeSocketTimeout||a.freeSocketKeepAliveTimeout||b}keepSocketAlive(a){let b=super.keepSocketAlive(a);if(!b)return b;let c=this.calcSocketTimeout(a);return void 0===c||(c<=0?(f("%s(requests: %s, finished: %s) free but need to destroy by TTL, request count %s, diff is %s",a[k],a[l],a[m],c),!1):(a.timeout!==c&&a.setTimeout(c),!0))}reuseSocket(...a){super.reuseSocket(...a);let b=a[0];a[1].reusedSocket=!0;let c=this.options.timeout;q(b)!==c&&(b.setTimeout(c),f("%s reset timeout to %sms",b[k],c)),b[l]++,f("%s(requests: %s, finished: %s) reuse on addRequest, timeout %sms",b[k],b[l],b[m],q(b))}[i](){let a=this[h]++;return this[h]===Number.MAX_SAFE_INTEGER&&(this[h]=0),a}[g](a,b){b.timeout&&(q(a)||a.setTimeout(b.timeout)),this.options.keepAlive&&a.setNoDelay(!0),this.createSocketCount++,this.options.socketActiveTTL&&(a[j]=Date.now()),a[k]=`sock[${this[i]()}#${b._agentKey}]`.split("-----BEGIN",1)[0],a[l]=1,a[m]=0,function(a,b,c){function d(){if(!b._httpMessage&&1===b[l])return;b[m]++,a.requestCount++,f("%s(requests: %s, finished: %s) free",b[k],b[l],b[m]);let d=a.getName(c);b.writable&&a.requests[d]&&a.requests[d].length&&(b[l]++,f("%s(requests: %s, finished: %s) will be reuse on agent free event",b[k],b[l],b[m]))}function e(c){f("%s(requests: %s, finished: %s) close, isError: %s",b[k],b[l],b[m],c),a.closeSocketCount++}function g(){let d=b.listeners("timeout").length,e=q(b),g=b._httpMessage,h=g&&g.listeners("timeout").length||0;f("%s(requests: %s, finished: %s) timeout after %sms, listeners %s, defaultTimeoutListenerCount %s, hasHttpRequest %s, HttpRequest timeoutListenerCount %s",b[k],b[l],b[m],e,d,n,!!g,h),f.enabled&&f("timeout listeners: %s",b.listeners("timeout").map(a=>a.name).join(", ")),a.timeoutSocketCount++;let i=a.getName(c);if(a.freeSockets[i]&&-1!==a.freeSockets[i].indexOf(b))b.destroy(),a.removeSocket(b,c),f("%s is free, destroy quietly",b[k]);else if(0===h){let d=Error("Socket timeout");d.code="ERR_SOCKET_TIMEOUT",d.timeout=e,b.destroy(d),a.removeSocket(b,c),f("%s destroy with timeout error",b[k])}}function h(c){let d=b.listeners("error").length;f("%s(requests: %s, finished: %s) error: %s, listenerCount: %s",b[k],b[l],b[m],c,d),a.errorSocketCount++,1===d&&(f("%s emit uncaught error event",b[k]),b.removeListener("error",h),b.emit("error",c))}f("%s create, timeout %sms",b[k],q(b)),b.on("free",d),b.on("close",e),b.on("timeout",g),b.on("error",h),b.on("agentRemove",function a(){f("%s(requests: %s, finished: %s) agentRemove",b[k],b[l],b[m]),b.removeListener("close",e),b.removeListener("error",h),b.removeListener("free",d),b.removeListener("timeout",g),b.removeListener("agentRemove",a)})}(this,a,b)}createConnection(a,b){let c=!1,d=(d,e)=>{if(!c){if(c=!0,d)return this.createSocketErrorCount++,b(d);this[g](e,a),b(d,e)}},e=super.createConnection(a,d);return e&&d(null,e),e}get statusChanged(){let a=this.createSocketCount!==this.createSocketCountLastCheck||this.createSocketErrorCount!==this.createSocketErrorCountLastCheck||this.closeSocketCount!==this.closeSocketCountLastCheck||this.errorSocketCount!==this.errorSocketCountLastCheck||this.timeoutSocketCount!==this.timeoutSocketCountLastCheck||this.requestCount!==this.requestCountLastCheck;return a&&(this.createSocketCountLastCheck=this.createSocketCount,this.createSocketErrorCountLastCheck=this.createSocketErrorCount,this.closeSocketCountLastCheck=this.closeSocketCount,this.errorSocketCountLastCheck=this.errorSocketCount,this.timeoutSocketCountLastCheck=this.timeoutSocketCount,this.requestCountLastCheck=this.requestCount),a}getCurrentStatus(){return{createSocketCount:this.createSocketCount,createSocketErrorCount:this.createSocketErrorCount,closeSocketCount:this.closeSocketCount,errorSocketCount:this.errorSocketCount,timeoutSocketCount:this.timeoutSocketCount,requestCount:this.requestCount,freeSockets:r(this.freeSockets),sockets:r(this.sockets),requests:r(this.requests)}}}},35369,(a,b,c)=>{"use strict";let d=a.r(24836).Agent,e=a.r(18855),{INIT_SOCKET:f,CREATE_HTTPS_CONNECTION:g}=a.r(4571);class h extends e{constructor(a){super(a),this.defaultPort=443,this.protocol="https:",this.maxCachedSessions=this.options.maxCachedSessions,void 0===this.maxCachedSessions&&(this.maxCachedSessions=100),this._sessionCache={map:{},list:[]}}createConnection(a,b){let c=this[g](a,b);return this[f](c,a),c}}h.prototype[g]=d.prototype.createConnection,["getName","_getSession","_cacheSession","_evictSession"].forEach(function(a){"function"==typeof d.prototype[a]&&(h.prototype[a]=d.prototype[a])}),b.exports=h},23072,(a,b,c)=>{"use strict";let d=a.r(18855);b.exports=d,b.exports.HttpAgent=d,b.exports.HttpsAgent=a.r(35369),b.exports.constants=a.r(4571)},74434,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=new WeakMap,e=new WeakMap;function f(a){let b=d.get(a);return console.assert(null!=b,"'this' is expected an Event object, but got",a),b}function g(a){if(null!=a.passiveListener){"undefined"!=typeof console&&"function"==typeof console.error&&console.error("Unable to preventDefault inside passive event listener invocation.",a.passiveListener);return}a.event.cancelable&&(a.canceled=!0,"function"==typeof a.event.preventDefault&&a.event.preventDefault())}function h(a,b){d.set(this,{eventTarget:a,event:b,eventPhase:2,currentTarget:a,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:b.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let c=Object.keys(b);for(let a=0;a<c.length;++a){let b=c[a];b in this||Object.defineProperty(this,b,i(b))}}function i(a){return{get(){return f(this).event[a]},set(b){f(this).event[a]=b},configurable:!0,enumerable:!0}}function j(a,b){f(a).passiveListener=b}h.prototype={get type(){return f(this).event.type},get target(){return f(this).eventTarget},get currentTarget(){return f(this).currentTarget},composedPath(){let a=f(this).currentTarget;return null==a?[]:[a]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return f(this).eventPhase},stopPropagation(){let a=f(this);a.stopped=!0,"function"==typeof a.event.stopPropagation&&a.event.stopPropagation()},stopImmediatePropagation(){let a=f(this);a.stopped=!0,a.immediateStopped=!0,"function"==typeof a.event.stopImmediatePropagation&&a.event.stopImmediatePropagation()},get bubbles(){return!!f(this).event.bubbles},get cancelable(){return!!f(this).event.cancelable},preventDefault(){g(f(this))},get defaultPrevented(){return f(this).canceled},get composed(){return!!f(this).event.composed},get timeStamp(){return f(this).timeStamp},get srcElement(){return f(this).eventTarget},get cancelBubble(){return f(this).stopped},set cancelBubble(value){if(!value)return;let a=f(this);a.stopped=!0,"boolean"==typeof a.event.cancelBubble&&(a.event.cancelBubble=!0)},get returnValue(){return!f(this).canceled},set returnValue(value){value||g(f(this))},initEvent(){}},Object.defineProperty(h.prototype,"constructor",{value:h,configurable:!0,writable:!0});let k=new WeakMap;function l(a){return null!==a&&"object"==typeof a}function m(a){let b=k.get(a);if(null==b)throw TypeError("'this' is expected an EventTarget object, but got another value.");return b}function n(a,b){Object.defineProperty(a,`on${b}`,{get(){let a=m(this).get(b);for(;null!=a;){if(3===a.listenerType)return a.listener;a=a.next}return null},set(a){"function"==typeof a||l(a)||(a=null);let c=m(this),d=null,e=c.get(b);for(;null!=e;)3===e.listenerType?null!==d?d.next=e.next:null!==e.next?c.set(b,e.next):c.delete(b):d=e,e=e.next;if(null!==a){let e={listener:a,listenerType:3,passive:!1,once:!1,next:null};null===d?c.set(b,e):d.next=e}},configurable:!0,enumerable:!0})}function o(a){function b(){p.call(this)}b.prototype=Object.create(p.prototype,{constructor:{value:b,configurable:!0,writable:!0}});for(let c=0;c<a.length;++c)n(b.prototype,a[c]);return b}function p(){if(this instanceof p)return void k.set(this,new Map);if(1==arguments.length&&Array.isArray(arguments[0]))return o(arguments[0]);if(arguments.length>0){let a=Array(arguments.length);for(let b=0;b<arguments.length;++b)a[b]=arguments[b];return o(a)}throw TypeError("Cannot call a class as a function")}p.prototype={addEventListener(a,b,c){if(null==b)return;if("function"!=typeof b&&!l(b))throw TypeError("'listener' should be a function or an object.");let d=m(this),e=l(c),f=(e?c.capture:c)?1:2,g={listener:b,listenerType:f,passive:e&&!!c.passive,once:e&&!!c.once,next:null},h=d.get(a);if(void 0===h)return void d.set(a,g);let i=null;for(;null!=h;){if(h.listener===b&&h.listenerType===f)return;i=h,h=h.next}i.next=g},removeEventListener(a,b,c){if(null==b)return;let d=m(this),e=(l(c)?c.capture:c)?1:2,f=null,g=d.get(a);for(;null!=g;){if(g.listener===b&&g.listenerType===e)return void(null!==f?f.next=g.next:null!==g.next?d.set(a,g.next):d.delete(a));f=g,g=g.next}},dispatchEvent(a){if(null==a||"string"!=typeof a.type)throw TypeError('"event.type" should be a string.');let b=m(this),c=a.type,d=b.get(c);if(null==d)return!0;let g=new(function a(b){if(null==b||b===Object.prototype)return h;let c=e.get(b);return null==c&&(c=function(a,b){let c=Object.keys(b);if(0===c.length)return a;function d(b,c){a.call(this,b,c)}d.prototype=Object.create(a.prototype,{constructor:{value:d,configurable:!0,writable:!0}});for(let e=0;e<c.length;++e){let g=c[e];if(!(g in a.prototype)){let a="function"==typeof Object.getOwnPropertyDescriptor(b,g).value;Object.defineProperty(d.prototype,g,a?function(a){return{value(){let b=f(this).event;return b[a].apply(b,arguments)},configurable:!0,enumerable:!0}}(g):i(g))}}return d}(a(Object.getPrototypeOf(b)),b),e.set(b,c)),c}(Object.getPrototypeOf(a)))(this,a),k=null;for(;null!=d;){if(d.once?null!==k?k.next=d.next:null!==d.next?b.set(c,d.next):b.delete(c):k=d,j(g,d.passive?d.listener:null),"function"==typeof d.listener)try{d.listener.call(this,g)}catch(a){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(a)}else 3!==d.listenerType&&"function"==typeof d.listener.handleEvent&&d.listener.handleEvent(g);if(f(g).immediateStopped)break;d=d.next}return j(g,null),f(g).eventPhase=0,f(g).currentTarget=null,!g.defaultPrevented}},Object.defineProperty(p.prototype,"constructor",{value:p,configurable:!0,writable:!0}),c.defineEventAttribute=n,c.EventTarget=p,c.default=p,b.exports=p,b.exports.EventTarget=b.exports.default=p,b.exports.defineEventAttribute=n},6433,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a.r(74434);class AbortSignal extends d.EventTarget{constructor(){throw super(),TypeError("AbortSignal cannot be constructed directly")}get aborted(){let a=e.get(this);if("boolean"!=typeof a)throw TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return a}}d.defineEventAttribute(AbortSignal.prototype,"abort");let e=new WeakMap;Object.defineProperties(AbortSignal.prototype,{aborted:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(AbortSignal.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});class f{constructor(){g.set(this,function(){let a=Object.create(AbortSignal.prototype);return d.EventTarget.call(a),e.set(a,!1),a}())}get signal(){return h(this)}abort(){var a;a=h(this),!1===e.get(a)&&(e.set(a,!0),a.dispatchEvent({type:"abort"}))}}let g=new WeakMap;function h(a){let b=g.get(a);if(null==b)throw TypeError(`Expected 'this' to be an 'AbortController' object, but got ${null===a?"null":typeof a}`);return b}Object.defineProperties(f.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(f.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"}),c.AbortController=f,c.AbortSignal=AbortSignal,c.default=f,b.exports=f,b.exports.AbortController=b.exports.default=f,b.exports.AbortSignal=AbortSignal},73492,58313,a=>{"use strict";let b,c,d,e,f,g,h,i,j,k;var l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H=a.i(38735),I=a.i(61469),J=a.i(37137),K=a.i(24868),L=a.i(14747),M=a.i(9307),N=a.i(3766),O=a.i(18961);let P="RFC3986",Q={RFC1738:a=>String(a).replace(/%20/g,"+"),RFC3986:a=>String(a)};Object.prototype.hasOwnProperty;let R=Array.isArray,S=(()=>{let a=[];for(let b=0;b<256;++b)a.push("%"+((b<16?"0":"")+b.toString(16)).toUpperCase());return a})();function T(a,b){if(R(a)){let c=[];for(let d=0;d<a.length;d+=1)c.push(b(a[d]));return c}return b(a)}let U=Object.prototype.hasOwnProperty,V={brackets:a=>String(a)+"[]",comma:"comma",indices:(a,b)=>String(a)+"["+b+"]",repeat:a=>String(a)},W=Array.isArray,X=Array.prototype.push,Y=function(a,b){X.apply(a,W(b)?b:[b])},Z=Date.prototype.toISOString,$={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:(a,b,c,d,e)=>{if(0===a.length)return a;let f=a;if("symbol"==typeof a?f=Symbol.prototype.toString.call(a):"string"!=typeof a&&(f=String(a)),"iso-8859-1"===c)return escape(f).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let g="";for(let a=0;a<f.length;a+=1024){let b=f.length>=1024?f.slice(a,a+1024):f,c=[];for(let a=0;a<b.length;++a){let d=b.charCodeAt(a);if(45===d||46===d||95===d||126===d||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||"RFC1738"===e&&(40===d||41===d)){c[c.length]=b.charAt(a);continue}if(d<128){c[c.length]=S[d];continue}if(d<2048){c[c.length]=S[192|d>>6]+S[128|63&d];continue}if(d<55296||d>=57344){c[c.length]=S[224|d>>12]+S[128|d>>6&63]+S[128|63&d];continue}a+=1,d=65536+((1023&d)<<10|1023&b.charCodeAt(a)),c[c.length]=S[240|d>>18]+S[128|d>>12&63]+S[128|d>>6&63]+S[128|63&d]}g+=c.join("")}return g},encodeValuesOnly:!1,format:P,formatter:Q[P],indices:!1,serializeDate:a=>Z.call(a),skipNulls:!1,strictNullHandling:!1},_={},aa="12.8.1";class ab extends Error{}class ac extends ab{constructor(a,b,c,d){super(`${ac.makeMessage(a,b,c)}`),this.status=a,this.headers=d,this.error=b}static makeMessage(a,b,c){let d=b?.message?"string"==typeof b.message?b.message:JSON.stringify(b.message):b?JSON.stringify(b):c;return a&&d?`${a} ${d}`:a?`${a} status code (no body)`:d||"(no status code or body)"}static generate(a,b,c,d){return a&&d?400===a?new ag(a,b,c,d):401===a?new ah(a,b,c,d):403===a?new ai(a,b,c,d):404===a?new aj(a,b,c,d):409===a?new ak(a,b,c,d):422===a?new al(a,b,c,d):429===a?new am(a,b,c,d):a>=500?new an(a,b,c,d):new ac(a,b,c,d):new ae({message:c,cause:b1(b)})}}class ad extends ac{constructor({message:a}={}){super(void 0,void 0,a||"Request was aborted.",void 0)}}class ae extends ac{constructor({message:a,cause:b}){super(void 0,void 0,a||"Connection error.",void 0),b&&(this.cause=b)}}class af extends ae{constructor({message:a}={}){super({message:a??"Request timed out."})}}class ag extends ac{}class ah extends ac{}class ai extends ac{}class aj extends ac{}class ak extends ac{}class al extends ac{}class am extends ac{}class an extends ac{}let ao=!1;var ap=a.i(88947),aq=a.i(21517),ar=a.i(92509),as=a.i(44738),at=a.i(24836),au=a.i(6461);let av=ap.default.Readable,aw=Symbol("buffer"),ax=Symbol("type");class ay{constructor(){this[ax]="";const a=arguments[0],b=arguments[1],c=[];if(a){const b=Number(a.length);for(let d=0;d<b;d++){let b;const e=a[d];(b=e instanceof Buffer?e:ArrayBuffer.isView(e)?Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?Buffer.from(e):e instanceof ay?e[aw]:Buffer.from("string"==typeof e?e:String(e))).length,c.push(b)}}this[aw]=Buffer.concat(c);let d=b&&void 0!==b.type&&String(b.type).toLowerCase();d&&!/[^\u0020-\u007E]/.test(d)&&(this[ax]=d)}get size(){return this[aw].length}get type(){return this[ax]}text(){return Promise.resolve(this[aw].toString())}arrayBuffer(){let a=this[aw];return Promise.resolve(a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength))}stream(){let a=new av;return a._read=function(){},a.push(this[aw]),a.push(null),a}toString(){return"[object Blob]"}slice(){let a,b=this.size,c=arguments[0],d=arguments[1];a=void 0===c?0:c<0?Math.max(b+c,0):Math.min(c,b);let e=Math.max((void 0===d?b:d<0?Math.max(b+d,0):Math.min(d,b))-a,0),f=this[aw].slice(a,a+e),g=new ay([],{type:arguments[2]});return g[aw]=f,g}}function az(a,b,c){Error.call(this,a),this.message=a,this.type=b,c&&(this.code=this.errno=c.code),Error.captureStackTrace(this,this.constructor)}Object.defineProperties(ay.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(ay.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),az.prototype=Object.create(Error.prototype),az.prototype.constructor=az,az.prototype.name="FetchError";try{b=(()=>{let a=Error("Cannot find module 'encoding'");throw a.code="MODULE_NOT_FOUND",a})().convert}catch(a){}let aA=Symbol("Body internals"),aB=ap.default.PassThrough;function aC(a){var b=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c.size,e=c.timeout;null==a?a=null:aE(a)?a=Buffer.from(a.toString()):aF(a)||Buffer.isBuffer(a)||("[object ArrayBuffer]"===Object.prototype.toString.call(a)?a=Buffer.from(a):ArrayBuffer.isView(a)?a=Buffer.from(a.buffer,a.byteOffset,a.byteLength):a instanceof ap.default||(a=Buffer.from(String(a)))),this[aA]={body:a,disturbed:!1,error:null},this.size=void 0===d?0:d,this.timeout=void 0===e?0:e,a instanceof ap.default&&a.on("error",function(a){let c="AbortError"===a.name?a:new az(`Invalid response body while trying to fetch ${b.url}: ${a.message}`,"system",a);b[aA].error=c})}function aD(){var a=this;if(this[aA].disturbed)return aC.Promise.reject(TypeError(`body used already for: ${this.url}`));if(this[aA].disturbed=!0,this[aA].error)return aC.Promise.reject(this[aA].error);let b=this.body;if(null===b)return aC.Promise.resolve(Buffer.alloc(0));if(aF(b)&&(b=b.stream()),Buffer.isBuffer(b))return aC.Promise.resolve(b);if(!(b instanceof ap.default))return aC.Promise.resolve(Buffer.alloc(0));let c=[],d=0,e=!1;return new aC.Promise(function(f,g){let h;a.timeout&&(h=setTimeout(function(){e=!0,g(new az(`Response timeout while trying to fetch ${a.url} (over ${a.timeout}ms)`,"body-timeout"))},a.timeout)),b.on("error",function(b){"AbortError"===b.name?(e=!0,g(b)):g(new az(`Invalid response body while trying to fetch ${a.url}: ${b.message}`,"system",b))}),b.on("data",function(b){if(!e&&null!==b){if(a.size&&d+b.length>a.size){e=!0,g(new az(`content size at ${a.url} over limit: ${a.size}`,"max-size"));return}d+=b.length,c.push(b)}}),b.on("end",function(){if(!e){clearTimeout(h);try{f(Buffer.concat(c,d))}catch(b){g(new az(`Could not create Buffer from response body for ${a.url}: ${b.message}`,"system",b))}}})})}function aE(a){return"object"==typeof a&&"function"==typeof a.append&&"function"==typeof a.delete&&"function"==typeof a.get&&"function"==typeof a.getAll&&"function"==typeof a.has&&"function"==typeof a.set&&("URLSearchParams"===a.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(a)||"function"==typeof a.sort)}function aF(a){return"object"==typeof a&&"function"==typeof a.arrayBuffer&&"string"==typeof a.type&&"function"==typeof a.stream&&"function"==typeof a.constructor&&"string"==typeof a.constructor.name&&/^(Blob|File)$/.test(a.constructor.name)&&/^(Blob|File)$/.test(a[Symbol.toStringTag])}function aG(a){let b,c,d=a.body;if(a.bodyUsed)throw Error("cannot clone body after it is used");return d instanceof ap.default&&"function"!=typeof d.getBoundary&&(b=new aB,c=new aB,d.pipe(b),d.pipe(c),a[aA].body=b,d=c),d}function aH(a){if(null===a)return null;if("string"==typeof a)return"text/plain;charset=UTF-8";if(aE(a))return"application/x-www-form-urlencoded;charset=UTF-8";if(aF(a))return a.type||null;if(Buffer.isBuffer(a))return null;else if("[object ArrayBuffer]"===Object.prototype.toString.call(a))return null;else if(ArrayBuffer.isView(a))return null;else if("function"==typeof a.getBoundary)return`multipart/form-data;boundary=${a.getBoundary()}`;else if(a instanceof ap.default)return null;else return"text/plain;charset=UTF-8"}function aI(a){let b=a.body;return null===b?0:aF(b)?b.size:Buffer.isBuffer(b)?b.length:b&&"function"==typeof b.getLengthSync?b._lengthRetrievers&&0==b._lengthRetrievers.length||b.hasKnownLength&&b.hasKnownLength()?b.getLengthSync():null:null}aC.prototype={get body(){return this[aA].body},get bodyUsed(){return this[aA].disturbed},arrayBuffer(){return aD.call(this).then(function(a){return a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength)})},blob(){let a=this.headers&&this.headers.get("content-type")||"";return aD.call(this).then(function(b){return Object.assign(new ay([],{type:a.toLowerCase()}),{[aw]:b})})},json(){var a=this;return aD.call(this).then(function(b){try{return JSON.parse(b.toString())}catch(b){return aC.Promise.reject(new az(`invalid json response body at ${a.url} reason: ${b.message}`,"invalid-json"))}})},text(){return aD.call(this).then(function(a){return a.toString()})},buffer(){return aD.call(this)},textConverted(){var a=this;return aD.call(this).then(function(c){return function(a,c){let d,e;if("function"!=typeof b)throw Error("The package `encoding` must be installed to use the textConverted() function");let f=c.get("content-type"),g="utf-8";return f&&(d=/charset=([^;]*)/i.exec(f)),e=a.slice(0,1024).toString(),!d&&e&&(d=/<meta.+?charset=(['"])(.+?)\1/i.exec(e)),!d&&e&&(!(d=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(e))&&(d=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(e))&&d.pop(),d&&(d=/charset=(.*)/i.exec(d.pop()))),!d&&e&&(d=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(e)),d&&("gb2312"===(g=d.pop())||"gbk"===g)&&(g="gb18030"),b(a,"UTF-8",g).toString()}(c,a.headers)})}},Object.defineProperties(aC.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),aC.mixIn=function(a){for(let b of Object.getOwnPropertyNames(aC.prototype))if(!(b in a)){let c=Object.getOwnPropertyDescriptor(aC.prototype,b);Object.defineProperty(a,b,c)}},aC.Promise=a.g.Promise;let aJ=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,aK=/[^\t\x20-\x7e\x80-\xff]/;function aL(a){if(a=`${a}`,aJ.test(a)||""===a)throw TypeError(`${a} is not a legal HTTP header name`)}function aM(a){if(a=`${a}`,aK.test(a))throw TypeError(`${a} is not a legal HTTP header value`)}function aN(a,b){for(let c in b=b.toLowerCase(),a)if(c.toLowerCase()===b)return c}let aO=Symbol("map");class aP{constructor(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[aO]=Object.create(null),a instanceof aP){const b=a.raw();for(const a of Object.keys(b))for(const c of b[a])this.append(a,c);return}if(null==a);else if("object"==typeof a){const b=a[Symbol.iterator];if(null!=b){if("function"!=typeof b)throw TypeError("Header pairs must be iterable");const c=[];for(const b of a){if("object"!=typeof b||"function"!=typeof b[Symbol.iterator])throw TypeError("Each header pair must be iterable");c.push(Array.from(b))}for(const a of c){if(2!==a.length)throw TypeError("Each header pair must be a name/value tuple");this.append(a[0],a[1])}}else for(const b of Object.keys(a)){const c=a[b];this.append(b,c)}}else throw TypeError("Provided initializer must be an object")}get(a){aL(a=`${a}`);let b=aN(this[aO],a);return void 0===b?null:this[aO][b].join(", ")}forEach(a){let b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,c=aQ(this),d=0;for(;d<c.length;){var e=c[d];let f=e[0],g=e[1];a.call(b,g,f,this),c=aQ(this),d++}}set(a,b){a=`${a}`,b=`${b}`,aL(a),aM(b);let c=aN(this[aO],a);this[aO][void 0!==c?c:a]=[b]}append(a,b){a=`${a}`,b=`${b}`,aL(a),aM(b);let c=aN(this[aO],a);void 0!==c?this[aO][c].push(b):this[aO][a]=[b]}has(a){return aL(a=`${a}`),void 0!==aN(this[aO],a)}delete(a){aL(a=`${a}`);let b=aN(this[aO],a);void 0!==b&&delete this[aO][b]}raw(){return this[aO]}keys(){return aS(this,"key")}values(){return aS(this,"value")}[Symbol.iterator](){return aS(this,"key+value")}}function aQ(a){let b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";return Object.keys(a[aO]).sort().map("key"===b?function(a){return a.toLowerCase()}:"value"===b?function(b){return a[aO][b].join(", ")}:function(b){return[b.toLowerCase(),a[aO][b].join(", ")]})}aP.prototype.entries=aP.prototype[Symbol.iterator],Object.defineProperty(aP.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(aP.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});let aR=Symbol("internal");function aS(a,b){let c=Object.create(aT);return c[aR]={target:a,kind:b,index:0},c}let aT=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==aT)throw TypeError("Value of `this` is not a HeadersIterator");var a=this[aR];let b=a.target,c=a.kind,d=a.index,e=aQ(b,c);return d>=e.length?{value:void 0,done:!0}:(this[aR].index=d+1,{value:e[d],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));Object.defineProperty(aT,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});let aU=Symbol("Response internals"),aV=aq.default.STATUS_CODES;class aW{constructor(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};aC.call(this,a,b);const c=b.status||200,d=new aP(b.headers);if(null!=a&&!d.has("Content-Type")){const b=aH(a);b&&d.append("Content-Type",b)}this[aU]={url:b.url,status:c,statusText:b.statusText||aV[c],headers:d,counter:b.counter}}get url(){return this[aU].url||""}get status(){return this[aU].status}get ok(){return this[aU].status>=200&&this[aU].status<300}get redirected(){return this[aU].counter>0}get statusText(){return this[aU].statusText}get headers(){return this[aU].headers}clone(){return new aW(aG(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}aC.mixIn(aW.prototype),Object.defineProperties(aW.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(aW.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});let aX=Symbol("Request internals"),aY=ar.default.URL||as.default.URL,aZ=ar.default.parse,a$=ar.default.format;function a_(a){return/^[a-zA-Z][a-zA-Z\d+\-.]*:/.exec(a)&&(a=new aY(a).toString()),aZ(a)}let a0="destroy"in ap.default.Readable.prototype;function a1(a){return"object"==typeof a&&"object"==typeof a[aX]}class a2{constructor(a){let b,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a1(a)?b=a_(a.url):(b=a&&a.href?a_(a.href):a_(`${a}`),a={});let d=c.method||a.method||"GET";if(d=d.toUpperCase(),(null!=c.body||a1(a)&&null!==a.body)&&("GET"===d||"HEAD"===d))throw TypeError("Request with GET/HEAD method cannot have body");let e=null!=c.body?c.body:a1(a)&&null!==a.body?aG(a):null;aC.call(this,e,{timeout:c.timeout||a.timeout||0,size:c.size||a.size||0});const f=new aP(c.headers||a.headers||{});if(null!=e&&!f.has("Content-Type")){const a=aH(e);a&&f.append("Content-Type",a)}let g=a1(a)?a.signal:null;if("signal"in c&&(g=c.signal),null!=g&&!function(a){let b=a&&"object"==typeof a&&Object.getPrototypeOf(a);return!!(b&&"AbortSignal"===b.constructor.name)}(g))throw TypeError("Expected signal to be an instanceof AbortSignal");this[aX]={method:d,redirect:c.redirect||a.redirect||"follow",headers:f,parsedURL:b,signal:g},this.follow=void 0!==c.follow?c.follow:void 0!==a.follow?a.follow:20,this.compress=void 0!==c.compress?c.compress:void 0===a.compress||a.compress,this.counter=c.counter||a.counter||0,this.agent=c.agent||a.agent}get method(){return this[aX].method}get url(){return a$(this[aX].parsedURL)}get headers(){return this[aX].headers}get redirect(){return this[aX].redirect}get signal(){return this[aX].signal}clone(){return new a2(this)}}function a3(a){Error.call(this,a),this.type="aborted",this.message=a,Error.captureStackTrace(this,this.constructor)}aC.mixIn(a2.prototype),Object.defineProperty(a2.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(a2.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}}),a3.prototype=Object.create(Error.prototype),a3.prototype.constructor=a3,a3.prototype.name="AbortError";let a4=ar.default.URL||as.default.URL,a5=ap.default.PassThrough,a6=function(a,b){let c=new a4(b).hostname,d=new a4(a).hostname;return c===d||"."===c[c.length-d.length-1]&&c.endsWith(d)};function a7(a,b){if(!a7.Promise)throw Error("native promise missing, set fetch.Promise to your favorite alternative");return aC.Promise=a7.Promise,new a7.Promise(function(c,d){var e,f;let g,h,i,j=new a2(a,b),k=function(a){let b,c,d=a[aX].parsedURL,e=new aP(a[aX].headers);if(e.has("Accept")||e.set("Accept","*/*"),!d.protocol||!d.hostname)throw TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(d.protocol))throw TypeError("Only HTTP(S) protocols are supported");if(a.signal&&a.body instanceof ap.default.Readable&&!a0)throw Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let f=null;if(null==a.body&&/^(POST|PUT)$/i.test(a.method)&&(f="0"),null!=a.body){let b=aI(a);"number"==typeof b&&(f=String(b))}f&&e.set("Content-Length",f),e.has("User-Agent")||e.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),a.compress&&!e.has("Accept-Encoding")&&e.set("Accept-Encoding","gzip,deflate");let g=a.agent;return"function"==typeof g&&(g=g(d)),Object.assign({},d,{method:a.method,headers:(b=Object.assign({__proto__:null},e[aO]),void 0!==(c=aN(e[aO],"Host"))&&(b[c]=b[c][0]),b),agent:g})}(j),l=("https:"===k.protocol?at.default:aq.default).request,m=j.signal,n=null,o=function(){let a=new a3("The user aborted a request.");d(a),j.body&&j.body instanceof ap.default.Readable&&a8(j.body,a),n&&n.body&&n.body.emit("error",a)};if(m&&m.aborted)return void o();let p=function(){o(),r()},q=l(k);function r(){q.abort(),m&&m.removeEventListener("abort",p),clearTimeout(h)}m&&m.addEventListener("abort",p),j.timeout&&q.once("socket",function(a){h=setTimeout(function(){d(new az(`network timeout at: ${j.url}`,"request-timeout")),r()},j.timeout)}),q.on("error",function(a){d(new az(`request to ${j.url} failed, reason: ${a.message}`,"system",a)),n&&n.body&&a8(n.body,a),r()}),e=q,f=function(a){(!m||!m.aborted)&&n&&n.body&&a8(n.body,a)},e.on("socket",function(a){g=a}),e.on("response",function(a){let b=a.headers;"chunked"!==b["transfer-encoding"]||b["content-length"]||a.once("close",function(a){if(g&&g.listenerCount("data")>0&&!a){let a=Error("Premature close");a.code="ERR_STREAM_PREMATURE_CLOSE",f(a)}})}),14>parseInt(process.version.substring(1))&&q.on("socket",function(a){a.addListener("close",function(b){let c=a.listenerCount("data")>0;if(n&&c&&!b&&!(m&&m.aborted)){let a=Error("Premature close");a.code="ERR_STREAM_PREMATURE_CLOSE",n.body.emit("error",a)}})}),q.on("response",function(a){clearTimeout(h);let b=function(a){let b=new aP;for(let c of Object.keys(a))if(!aJ.test(c))if(Array.isArray(a[c]))for(let d of a[c])aK.test(d)||(void 0===b[aO][c]?b[aO][c]=[d]:b[aO][c].push(d));else aK.test(a[c])||(b[aO][c]=[a[c]]);return b}(a.headers);if(a7.isRedirect(a.statusCode)){let f=b.get("Location"),g=null;try{g=null===f?null:new a4(f,j.url).toString()}catch(a){if("manual"!==j.redirect){d(new az(`uri requested responds with an invalid redirect URL: ${f}`,"invalid-redirect")),r();return}}switch(j.redirect){case"error":d(new az(`uri requested responds with a redirect, redirect mode is set to error: ${j.url}`,"no-redirect")),r();return;case"manual":if(null!==g)try{b.set("Location",g)}catch(a){d(a)}break;case"follow":var e;if(null===g)break;if(j.counter>=j.follow){d(new az(`maximum redirect reached at: ${j.url}`,"max-redirect")),r();return}let h={headers:new aP(j.headers),follow:j.follow,counter:j.counter+1,agent:j.agent,compress:j.compress,method:j.method,body:j.body,signal:j.signal,timeout:j.timeout,size:j.size};if(!a6(j.url,g)||(e=j.url,new a4(g).protocol!==new a4(e).protocol))for(let a of["authorization","www-authenticate","cookie","cookie2"])h.headers.delete(a);if(303!==a.statusCode&&j.body&&null===aI(j)){d(new az("Cannot follow redirect with body being a readable stream","unsupported-redirect")),r();return}(303===a.statusCode||(301===a.statusCode||302===a.statusCode)&&"POST"===j.method)&&(h.method="GET",h.body=void 0,h.headers.delete("content-length")),c(a7(new a2(g,h))),r();return}}a.once("end",function(){m&&m.removeEventListener("abort",p)});let f=a.pipe(new a5),g={url:j.url,status:a.statusCode,statusText:a.statusMessage,headers:b,size:j.size,timeout:j.timeout,counter:j.counter},i=b.get("Content-Encoding");if(!j.compress||"HEAD"===j.method||null===i||204===a.statusCode||304===a.statusCode)return void c(n=new aW(f,g));let k={flush:au.default.Z_SYNC_FLUSH,finishFlush:au.default.Z_SYNC_FLUSH};if("gzip"==i||"x-gzip"==i)return void c(n=new aW(f=f.pipe(au.default.createGunzip(k)),g));if("deflate"==i||"x-deflate"==i){let b=a.pipe(new a5);b.once("data",function(a){c(n=new aW(f=(15&a[0])==8?f.pipe(au.default.createInflate()):f.pipe(au.default.createInflateRaw()),g))}),b.on("end",function(){n||c(n=new aW(f,g))});return}"br"==i&&"function"==typeof au.default.createBrotliDecompress?c(n=new aW(f=f.pipe(au.default.createBrotliDecompress()),g)):c(n=new aW(f,g))}),null===(i=j.body)?q.end():aF(i)?i.stream().pipe(q):Buffer.isBuffer(i)?(q.write(i),q.end()):i.pipe(q)})}function a8(a,b){a.destroy?a.destroy(b):(a.emit("error",b),a.end())}a7.isRedirect=function(a){return 301===a||302===a||303===a||307===a||308===a},a7.Promise=a.g.Promise;var a9=a.i(24361),ba=a.i(72366),bb=a.i(33608),bc=a.i(24197),bd=a.i(21145);let be=(0,a9.deprecate)(()=>{},'Constructor "entries" argument is not spec-compliant and will be removed in next major release.');var bf=function(a,b,c,d){if("a"===c&&!d)throw TypeError("Private accessor was defined without a getter");if("function"==typeof b?a!==b||!d:!b.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===c?d:"a"===c?d.call(a):d?d.value:b.get(a)};class bg{constructor(a){o.add(this),p.set(this,new Map),a&&(be(),a.forEach(({name:a,value:b,fileName:c})=>this.append(a,b,c)))}static[(p=new WeakMap,o=new WeakSet,Symbol.hasInstance)](a){return!!(a&&(0,bd.isFunction)(a.constructor)&&"FormData"===a[Symbol.toStringTag]&&(0,bd.isFunction)(a.append)&&(0,bd.isFunction)(a.set)&&(0,bd.isFunction)(a.get)&&(0,bd.isFunction)(a.getAll)&&(0,bd.isFunction)(a.has)&&(0,bd.isFunction)(a.delete)&&(0,bd.isFunction)(a.entries)&&(0,bd.isFunction)(a.values)&&(0,bd.isFunction)(a.keys)&&(0,bd.isFunction)(a[Symbol.iterator])&&(0,bd.isFunction)(a.forEach))}append(a,b,c){bf(this,o,"m",q).call(this,{name:a,fileName:c,append:!0,rawValue:b,argsLength:arguments.length})}set(a,b,c){bf(this,o,"m",q).call(this,{name:a,fileName:c,append:!1,rawValue:b,argsLength:arguments.length})}get(a){let b=bf(this,p,"f").get(String(a));return b?b[0]:null}getAll(a){let b=bf(this,p,"f").get(String(a));return b?b.slice():[]}has(a){return bf(this,p,"f").has(String(a))}delete(a){bf(this,p,"f").delete(String(a))}*keys(){for(let a of bf(this,p,"f").keys())yield a}*entries(){for(let a of this.keys())for(let b of this.getAll(a))yield[a,b]}*values(){for(let[,a]of this)yield a}[(q=function({name:a,rawValue:b,append:c,fileName:d,argsLength:e}){let f,g=c?"append":"set";if(e<2)throw TypeError(`Failed to execute '${g}' on 'FormData': 2 arguments required, but only ${e} present.`);if(a=String(a),(0,bb.isFile)(b))f=void 0===d?b:new ba.File([b],d,{type:b.type,lastModified:b.lastModified});else if(b instanceof bc.Blob)f=new ba.File([b],void 0===d?"blob":d,{type:b.type});else if(d)throw TypeError(`Failed to execute '${g}' on 'FormData': parameter 2 is not of type 'Blob'.`);else f=String(b);let h=bf(this,p,"f").get(a);h&&c?h.push(f):bf(this,p,"f").set(a,[f])},Symbol.iterator)](){return this.entries()}forEach(a,b){for(let[c,d]of this)a.call(b,d,c,this)}get[Symbol.toStringTag](){return"FormData"}[a9.inspect.custom](){return this[Symbol.toStringTag]}}var bh=a.i(23072),bi=a.i(6433),bj=a.i(2157);let bk="abcdefghijklmnopqrstuvwxyz0123456789",bl=function(){let a=16,b="";for(;a--;)b+=bk[Math.random()*bk.length|0];return b},bm=function(a){if("object"!==Object.prototype.toString.call(a).slice(8,-1).toLowerCase())return!1;let b=Object.getPrototypeOf(a);return null==b||(b.constructor&&b.constructor.toString())===Object.toString()},bn=a=>String(a).replace(/\r|\n/g,(a,b,c)=>"\r"===a&&"\n"!==c[b+1]||"\n"===a&&"\r"!==c[b-1]?"\r\n":a),bo=a=>String(a).replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/"/g,"%22"),bp=a=>!!(a&&"object"==typeof a&&"function"==typeof a.constructor&&"File"===a[Symbol.toStringTag]&&"function"==typeof a.stream&&null!=a.name&&null!=a.size&&null!=a.lastModified);var bq=function(a,b,c,d,e){if("m"===d)throw TypeError("Private method is not writable");if("a"===d&&!e)throw TypeError("Private accessor was defined without a setter");if("function"==typeof b?a!==b||!e:!b.has(a))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===d?e.call(a,c):e?e.value=c:b.set(a,c),c},br=function(a,b,c,d){if("a"===c&&!d)throw TypeError("Private accessor was defined without a getter");if("function"==typeof b?a!==b||!d:!b.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===c?d:"a"===c?d.call(a):d?d.value:b.get(a)};let bs={enableAdditionalHeaders:!1};class bt{constructor(a,b,c){let d;if(r.add(this),s.set(this,"\r\n"),t.set(this,void 0),u.set(this,void 0),v.set(this,"-".repeat(2)),w.set(this,new TextEncoder),x.set(this,void 0),y.set(this,void 0),z.set(this,void 0),!(a=>!!(a&&"function"==typeof a.constructor&&"FormData"===a[Symbol.toStringTag]&&"function"==typeof a.append&&"function"==typeof a.getAll&&"function"==typeof a.entries&&"function"==typeof a[Symbol.iterator]))(a))throw TypeError("Expected first argument to be a FormData instance.");if(bm(b)?c=b:d=b,d||(d=bl()),"string"!=typeof d)throw TypeError("Expected boundary argument to be a string.");if(c&&!bm(c))throw TypeError("Expected options argument to be an object.");bq(this,y,a,"f"),bq(this,z,{...bs,...c},"f"),bq(this,t,br(this,w,"f").encode(br(this,s,"f")),"f"),bq(this,u,br(this,t,"f").byteLength,"f"),this.boundary=`form-data-boundary-${d}`,this.contentType=`multipart/form-data; boundary=${this.boundary}`,bq(this,x,br(this,w,"f").encode(`${br(this,v,"f")}${this.boundary}${br(this,v,"f")}${br(this,s,"f").repeat(2)}`),"f"),this.contentLength=String(this.getContentLength()),this.headers=Object.freeze({"Content-Type":this.contentType,"Content-Length":this.contentLength}),Object.defineProperties(this,{boundary:{writable:!1,configurable:!1},contentType:{writable:!1,configurable:!1},contentLength:{writable:!1,configurable:!1},headers:{writable:!1,configurable:!1}})}getContentLength(){let a=0;for(let[b,c]of br(this,y,"f")){let d=bp(c)?c:br(this,w,"f").encode(bn(c));a+=br(this,r,"m",A).call(this,b,d).byteLength,a+=bp(d)?d.size:d.byteLength,a+=br(this,u,"f")}return a+br(this,x,"f").byteLength}*values(){for(let[a,b]of br(this,y,"f").entries()){let c=bp(b)?b:br(this,w,"f").encode(bn(b));yield br(this,r,"m",A).call(this,a,c),yield c,yield br(this,t,"f")}yield br(this,x,"f")}async *encode(){for(let a of this.values())bp(a)?yield*a.stream():yield a}[(s=new WeakMap,t=new WeakMap,u=new WeakMap,v=new WeakMap,w=new WeakMap,x=new WeakMap,y=new WeakMap,z=new WeakMap,r=new WeakSet,A=function(a,b){let c="";return c+=`${br(this,v,"f")}${this.boundary}${br(this,s,"f")}Content-Disposition: form-data; name="${bo(a)}"`,bp(b)&&(c+=`; filename="${bo(b.name)}"${br(this,s,"f")}Content-Type: ${b.type||"application/octet-stream"}`),!0===br(this,z,"f").enableAdditionalHeaders&&(c+=`${br(this,s,"f")}Content-Length: ${bp(b)?b.size:b.byteLength}`),br(this,w,"f").encode(`${c}${br(this,s,"f").repeat(2)}`)},Symbol.iterator)](){return this.values()}[Symbol.asyncIterator](){return this.encode()}}var bu=a.i(81111);class bv{constructor(a){this.body=a}get[Symbol.toStringTag](){return"MultipartBody"}}var bw=a.i(18352);let bx=!1;async function by(b,...c){let{fileFromPath:d}=await a.A(55492);return bx||(console.warn(`fileFromPath is deprecated; use fs.createReadStream(${JSON.stringify(b)}) instead`),bx=!0),await d(b,...c)}let bz=new bh.default({keepAlive:!0,timeout:3e5}),bA=new bh.default.HttpsAgent({keepAlive:!0,timeout:3e5});async function bB(a,b){let c=new bt(a),d=new bv(bu.Readable.from(c)),e={...b.headers,...c.headers,"Content-Length":c.contentLength};return{...b,body:d,headers:e}}let bC=()=>{f||function(a,b={auto:!1}){if(ao)throw Error(`you must \`import '@mux/mux-node/shims/${a.kind}'\` before importing anything else from @mux/mux-node`);if(f)throw Error(`can't \`import '@mux/mux-node/shims/${a.kind}'\` after \`import '@mux/mux-node/shims/${f}'\``);ao=b.auto,f=a.kind,g=a.fetch,a.Request,a.Response,a.Headers,a.FormData,a.Blob,h=a.File,a.ReadableStream,a.getMultipartRequestOptions,i=a.getDefaultAgent,j=a.fileFromPath,k=a.isFsReadStream}(("undefined"==typeof AbortController&&(globalThis.AbortController=bi.AbortController),{kind:"node",fetch:a7,Request:a2,Response:aW,Headers:aP,FormData:bg,Blob:bc.Blob,File:ba.File,ReadableStream:bw.ReadableStream,getMultipartRequestOptions:bB,getDefaultAgent:a=>a.startsWith("https")?bA:bz,fileFromPath:by,isFsReadStream:a=>a instanceof bj.ReadStream}),{auto:!0})};bC();let bD=a=>null!=a&&"object"==typeof a&&"string"==typeof a.url&&"function"==typeof a.blob,bE=a=>null!=a&&"object"==typeof a&&"string"==typeof a.name&&"number"==typeof a.lastModified&&bF(a),bF=a=>null!=a&&"object"==typeof a&&"number"==typeof a.size&&"string"==typeof a.type&&"function"==typeof a.text&&"function"==typeof a.slice&&"function"==typeof a.arrayBuffer;async function bG(a,b,c){var d;if(bE(a=await a))return a;if(bD(a)){let d=await a.blob();b||(b=new URL(a.url).pathname.split(/[\\/]/).pop()??"unknown_file");let e=bF(d)?[await d.arrayBuffer()]:[d];return new h(e,b,c)}let e=await bH(a);if(b||(b=(bI((d=a).name)||bI(d.filename)||bI(d.path)?.split(/[\\/]/).pop())??"unknown_file"),!c?.type){let a=e[0]?.type;"string"==typeof a&&(c={...c,type:a})}return new h(e,b,c)}async function bH(a){let b=[];if("string"==typeof a||ArrayBuffer.isView(a)||a instanceof ArrayBuffer)b.push(a);else if(bF(a))b.push(await a.arrayBuffer());else if(bJ(a))for await(let c of a)b.push(c);else{let b;throw Error(`Unexpected data type: ${typeof a}; constructor: ${a?.constructor?.name}; props: ${(b=Object.getOwnPropertyNames(a),`[${b.map(a=>`"${a}"`).join(", ")}]`)}`)}return b}let bI=a=>"string"==typeof a?a:"undefined"!=typeof Buffer&&a instanceof Buffer?String(a):void 0,bJ=a=>null!=a&&"object"==typeof a&&"function"==typeof a[Symbol.asyncIterator],bK=a=>a&&"object"==typeof a&&a.body&&"MultipartBody"===a[Symbol.toStringTag];var bL=function(a,b,c,d,e){if("m"===d)throw TypeError("Private method is not writable");if("a"===d&&!e)throw TypeError("Private accessor was defined without a setter");if("function"==typeof b?a!==b||!e:!b.has(a))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===d?e.call(a,c):e?e.value=c:b.set(a,c),c},bM=function(a,b,c,d){if("a"===c&&!d)throw TypeError("Private accessor was defined without a getter");if("function"==typeof b?a!==b||!d:!b.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===c?d:"a"===c?d.call(a):d?d.value:b.get(a)};async function bN(a){let{response:b}=a;if(204===b.status)return null;if(a.options.__binaryResponse)return b;let c=b.headers.get("content-type"),d=c?.split(";")[0]?.trim();if(d?.includes("application/json")||d?.endsWith("+json")){let a=await b.json();return b6("response",b.status,b.url,b.headers,a),a}let e=await b.text();return b6("response",b.status,b.url,b.headers,e),e}bC();class bO extends Promise{constructor(a,b=bN){super(a=>{a(null)}),this.responsePromise=a,this.parseResponse=b}_thenUnwrap(a){return new bO(this.responsePromise,async b=>a(await this.parseResponse(b),b))}asResponse(){return this.responsePromise.then(a=>a.response)}async withResponse(){let[a,b]=await Promise.all([this.parse(),this.asResponse()]);return{data:a,response:b}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(a,b){return this.parse().then(a,b)}catch(a){return this.parse().catch(a)}finally(a){return this.parse().finally(a)}}class bP{constructor({baseURL:a,baseURLOverridden:b,maxRetries:c=2,timeout:d=6e4,httpAgent:e,fetch:f}){B.set(this,void 0),this.baseURL=a,bL(this,B,b,"f"),this.maxRetries=b0("maxRetries",c),this.timeout=b0("timeout",d),this.httpAgent=e,this.fetch=f??g}authHeaders(a){return{}}defaultHeaders(a){return{Accept:"application/json",...["head","get"].includes(a.method)?{}:{"Content-Type":"application/json"},"User-Agent":this.getUserAgent(),...bX(),...this.authHeaders(a)}}validateHeaders(a,b){}defaultIdempotencyKey(){return`stainless-node-retry-${b7()}`}get(a,b){return this.methodRequest("get",a,b)}post(a,b){return this.methodRequest("post",a,b)}patch(a,b){return this.methodRequest("patch",a,b)}put(a,b){return this.methodRequest("put",a,b)}delete(a,b){return this.methodRequest("delete",a,b)}methodRequest(a,b,c){return this.request(Promise.resolve(c).then(c=>({method:a,path:b,...c})))}getAPIList(a,b,c){return this.requestAPIList(b,{method:"get",path:a,...c})}calculateContentLength(a){if("string"==typeof a){if("undefined"!=typeof Buffer)return Buffer.byteLength(a,"utf8").toString();if("undefined"!=typeof TextEncoder)return new TextEncoder().encode(a).length.toString()}return null}async buildRequest(a,{retryCount:b=0}={}){let c={...a},{method:d,path:e,query:f,defaultBaseURL:g,headers:h={}}=c,j=bK(c.body)?c.body.body:c.body?JSON.stringify(c.body,null,2):null,k=this.calculateContentLength(j),l=this.buildURL(e,f,g);"timeout"in c&&b0("timeout",c.timeout),c.timeout=c.timeout??this.timeout;let m=c.httpAgent??this.httpAgent??i(l),n=c.timeout+1e3;"number"==typeof m?.options?.timeout&&n>(m.options.timeout??0)&&(m.options.timeout=n),this.idempotencyHeader&&"get"!==d&&(a.idempotencyKey||(a.idempotencyKey=this.defaultIdempotencyKey()),h[this.idempotencyHeader]=a.idempotencyKey);let o=this.buildHeaders({options:c,headers:h,contentLength:k,retryCount:b});return{req:{method:d,...j&&{body:j},headers:o,...m&&{agent:m},signal:c.signal??null},url:l,timeout:c.timeout}}buildHeaders({options:a,headers:b,contentLength:c,retryCount:d}){let e={};c&&(e["content-length"]=c);let g=this.defaultHeaders(a);return b5(e,g),b5(e,b),"get"===a.method&&delete e["content-type"],bK(a.body)&&"node"!==f&&delete e["content-type"],void 0===b8(g,"x-stainless-retry-count")&&void 0===b8(b,"x-stainless-retry-count")&&(e["x-stainless-retry-count"]=String(d)),void 0===b8(g,"x-stainless-timeout")&&void 0===b8(b,"x-stainless-timeout")&&a.timeout&&(e["x-stainless-timeout"]=String(Math.trunc(a.timeout/1e3))),this.validateHeaders(e,b),e}async prepareOptions(a){}async prepareRequest(a,{url:b,options:c}){}parseHeaders(a){return a?Symbol.iterator in a?Object.fromEntries(Array.from(a).map(a=>[...a])):{...a}:{}}makeStatusError(a,b,c,d){return ac.generate(a,b,c,d)}request(a,b=null){return new bO(this.makeRequest(a,b))}async makeRequest(a,b){let c=await a,d=c.maxRetries??this.maxRetries;null==b&&(b=d),await this.prepareOptions(c);let{req:e,url:f,timeout:g}=await this.buildRequest(c,{retryCount:d-b});if(await this.prepareRequest(e,{url:f,options:c}),b6("request",f,c,e.headers),c.signal?.aborted)throw new ad;let h=new AbortController,i=await this.fetchWithTimeout(f,e,g,h).catch(b1);if(i instanceof Error){if(c.signal?.aborted)throw new ad;if(b)return this.retryRequest(c,b);if("AbortError"===i.name)throw new af;throw new ae({cause:i})}let j=bS(i.headers);if(!i.ok){if(b&&this.shouldRetry(i)){let a=`retrying, ${b} attempts remaining`;return b6(`response (error; ${a})`,i.status,f,j),this.retryRequest(c,b,j)}let a=await i.text().catch(a=>b1(a).message),d=bY(a),e=d?void 0:a,g=b?"(error; no more retries left)":"(error; not retryable)";throw b6(`response (error; ${g})`,i.status,f,j,e),this.makeStatusError(i.status,d,e,j)}return{response:i,options:c,controller:h}}requestAPIList(a,b){return new bR(this,this.makeRequest(b,null),a)}buildURL(a,b,c){let d=!bM(this,B,"f")&&c||this.baseURL,e=new URL(b$(a)?a:d+(d.endsWith("/")&&a.startsWith("/")?a.slice(1):a)),f=this.defaultQuery();return b3(f)||(b={...f,...b}),"object"==typeof b&&b&&!Array.isArray(b)&&(e.search=this.stringifyQuery(b)),e.toString()}stringifyQuery(a){return Object.entries(a).filter(([a,b])=>void 0!==b).map(([a,b])=>{if("string"==typeof b||"number"==typeof b||"boolean"==typeof b)return`${encodeURIComponent(a)}=${encodeURIComponent(b)}`;if(null===b)return`${encodeURIComponent(a)}=`;throw new ab(`Cannot stringify type ${typeof b}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(a,b,c,d){let{signal:e,...f}=b||{};e&&e.addEventListener("abort",()=>d.abort());let g=setTimeout(()=>d.abort(),c),h={signal:d.signal,...f};return h.method&&(h.method=h.method.toUpperCase()),this.fetch.call(void 0,a,h).finally(()=>{clearTimeout(g)})}shouldRetry(a){let b=a.headers.get("x-should-retry");return"true"===b||"false"!==b&&(408===a.status||409===a.status||429===a.status||!!(a.status>=500))}async retryRequest(a,b,c){let d,e=c?.["retry-after-ms"];if(e){let a=parseFloat(e);Number.isNaN(a)||(d=a)}let f=c?.["retry-after"];if(f&&!d){let a=parseFloat(f);d=Number.isNaN(a)?Date.parse(f)-Date.now():1e3*a}if(!(d&&0<=d&&d<6e4)){let c=a.maxRetries??this.maxRetries;d=this.calculateDefaultRetryTimeoutMillis(b,c)}return await b_(d),this.makeRequest(a,b-1)}calculateDefaultRetryTimeoutMillis(a,b){return Math.min(.5*Math.pow(2,b-a),8)*(1-.25*Math.random())*1e3}getUserAgent(){return`${this.constructor.name}/JS ${aa}`}}B=new WeakMap;class bQ{constructor(a,b,c,d){C.set(this,void 0),bL(this,C,a,"f"),this.options=d,this.response=b,this.body=c}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageInfo()}async getNextPage(){let a=this.nextPageInfo();if(!a)throw new ab("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");let b={...this.options};if("params"in a&&"object"==typeof b.query)b.query={...b.query,...a.params};else if("url"in a){for(let[c,d]of[...Object.entries(b.query||{}),...a.url.searchParams.entries()])a.url.searchParams.set(c,d);b.query=void 0,b.path=a.url.toString()}return await bM(this,C,"f").requestAPIList(this.constructor,b)}async *iterPages(){let a=this;for(yield a;a.hasNextPage();)a=await a.getNextPage(),yield a}async *[(C=new WeakMap,Symbol.asyncIterator)](){for await(let a of this.iterPages())for(let b of a.getPaginatedItems())yield b}}class bR extends bO{constructor(a,b,c){super(b,async b=>new c(a,b.response,await bN(b),b.options))}async *[Symbol.asyncIterator](){for await(let a of(await this))yield a}}let bS=a=>new Proxy(Object.fromEntries(a.entries()),{get(a,b){let c=b.toString();return a[c.toLowerCase()]||a[c]}}),bT={method:!0,path:!0,query:!0,body:!0,headers:!0,defaultBaseURL:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryResponse:!0},bU=a=>"object"==typeof a&&null!==a&&!b3(a)&&Object.keys(a).every(a=>b4(bT,a)),bV=a=>"x32"===a?"x32":"x86_64"===a||"x64"===a?"x64":"arm"===a?"arm":"aarch64"===a||"arm64"===a?"arm64":a?`other:${a}`:"unknown",bW=a=>(a=a.toLowerCase()).includes("ios")?"iOS":"android"===a?"Android":"darwin"===a?"MacOS":"win32"===a?"Windows":"freebsd"===a?"FreeBSD":"openbsd"===a?"OpenBSD":"linux"===a?"Linux":a?`Other:${a}`:"Unknown",bX=()=>c??(c=(()=>{if("undefined"!=typeof Deno&&null!=Deno.build)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":aa,"X-Stainless-OS":bW(Deno.build.os),"X-Stainless-Arch":bV(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":aa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if("[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0))return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":aa,"X-Stainless-OS":bW(process.platform),"X-Stainless-Arch":bV(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};let a=function(){if("undefined"==typeof navigator||!navigator)return null;for(let{key:a,pattern:b}of[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}]){let c=b.exec(navigator.userAgent);if(c){let b=c[1]||0,d=c[2]||0,e=c[3]||0;return{browser:a,version:`${b}.${d}.${e}`}}}return null}();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":aa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":aa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}})()),bY=a=>{try{return JSON.parse(a)}catch(a){return}},bZ=/^[a-z][a-z0-9+.-]*:/i,b$=a=>bZ.test(a),b_=a=>new Promise(b=>setTimeout(b,a)),b0=(a,b)=>{if("number"!=typeof b||!Number.isInteger(b))throw new ab(`${a} must be an integer`);if(b<0)throw new ab(`${a} must be a positive integer`);return b},b1=a=>{if(a instanceof Error)return a;if("object"==typeof a&&null!==a)try{return Error(JSON.stringify(a))}catch{}return Error(a)},b2=a=>"undefined"!=typeof process?process.env?.[a]?.trim()??void 0:"undefined"!=typeof Deno?Deno.env?.get?.(a)?.trim():void 0;function b3(a){if(!a)return!0;for(let b in a)return!1;return!0}function b4(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function b5(a,b){for(let c in b){if(!b4(b,c))continue;let d=c.toLowerCase();if(!d)continue;let e=b[c];null===e?delete a[d]:void 0!==e&&(a[d]=e)}}function b6(a,...b){"undefined"!=typeof process&&process?.env?.DEBUG==="true"&&console.log(`Mux:DEBUG:${a}`,...b)}let b7=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,a=>{let b=16*Math.random()|0;return("x"===a?b:3&b|8).toString(16)}),b8=(a,b)=>{let c=b.toLowerCase();if("function"==typeof a?.get){let d=b[0]?.toUpperCase()+b.substring(1).replace(/([^\w])(\w)/g,(a,b,c)=>b+c.toUpperCase());for(let e of[b,c,b.toUpperCase(),d]){let b=a.get(e);if(b)return b}}for(let[d,e]of Object.entries(a))if(d.toLowerCase()===c){if(Array.isArray(e)){if(e.length<=1)return e[0];return console.warn(`Received ${e.length} entries for the ${b} header, using the first entry.`),e[0]}return e}};class b9{constructor(a){this._client=a}}class ca extends bQ{constructor(a,b,c,d){super(a,b,c,d),this.data=c.data||[],this.total_row_count=c.total_row_count||0,this.timeframe=c.timeframe||[],this.limit=c.limit||0}getPaginatedItems(){return this.data??[]}nextPageParams(){let a=this.nextPageInfo();if(!a)return null;if("params"in a)return a.params;let b=Object.fromEntries(a.url.searchParams);return Object.keys(b).length?b:null}nextPageInfo(){let a=this.options.query;return{params:{page:(a?.page??1)+1}}}}class cb extends bQ{constructor(a,b,c,d){super(a,b,c,d),this.data=c.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){let a=this.nextPageInfo();if(!a)return null;if("params"in a)return a.params;let b=Object.fromEntries(a.url.searchParams);return Object.keys(b).length?b:null}nextPageInfo(){let a=this.options.query;return{params:{page:(a?.page??1)+1}}}}class cc extends b9{create(a,b){return this._client.post("/video/v1/assets",{body:a,defaultBaseURL:"https://api.mux.com",...b})._thenUnwrap(a=>a.data)}retrieve(a,b){return this._client.get(`/video/v1/assets/${a}`,{defaultBaseURL:"https://api.mux.com",...b})._thenUnwrap(a=>a.data)}update(a,b,c){return this._client.patch(`/video/v1/assets/${a}`,{body:b,defaultBaseURL:"https://api.mux.com",...c})._thenUnwrap(a=>a.data)}list(a={},b){return bU(a)?this.list({},a):this._client.getAPIList("/video/v1/assets",cd,{query:a,defaultBaseURL:"https://api.mux.com",...b})}delete(a,b){return this._client.delete(`/video/v1/assets/${a}`,{defaultBaseURL:"https://api.mux.com",...b,headers:{Accept:"*/*",...b?.headers}})}createPlaybackId(a,b,c){return this._client.post(`/video/v1/assets/${a}/playback-ids`,{body:b,defaultBaseURL:"https://api.mux.com",...c})._thenUnwrap(a=>a.data)}createStaticRendition(a,b,c){return this._client.post(`/video/v1/assets/${a}/static-renditions`,{body:b,defaultBaseURL:"https://api.mux.com",...c})._thenUnwrap(a=>a.data)}createTrack(a,b,c){return this._client.post(`/video/v1/assets/${a}/tracks`,{body:b,defaultBaseURL:"https://api.mux.com",...c})._thenUnwrap(a=>a.data)}deletePlaybackId(a,b,c){return this._client.delete(`/video/v1/assets/${a}/playback-ids/${b}`,{defaultBaseURL:"https://api.mux.com",...c,headers:{Accept:"*/*",...c?.headers}})}deleteStaticRendition(a,b,c){return this._client.delete(`/video/v1/assets/${a}/static-renditions/${b}`,{defaultBaseURL:"https://api.mux.com",...c,headers:{Accept:"*/*",...c?.headers}})}deleteTrack(a,b,c){return this._client.delete(`/video/v1/assets/${a}/tracks/${b}`,{defaultBaseURL:"https://api.mux.com",...c,headers:{Accept:"*/*",...c?.headers}})}generateSubtitles(a,b,c,d){return this._client.post(`/video/v1/assets/${a}/tracks/${b}/generate-subtitles`,{body:c,defaultBaseURL:"https://api.mux.com",...d})._thenUnwrap(a=>a.data)}retrieveInputInfo(a,b){return this._client.get(`/video/v1/assets/${a}/input-info`,{defaultBaseURL:"https://api.mux.com",...b})._thenUnwrap(a=>a.data)}retrievePlaybackId(a,b,c){return this._client.get(`/video/v1/assets/${a}/playback-ids/${b}`,{defaultBaseURL:"https://api.mux.com",...c})._thenUnwrap(a=>a.data)}updateMasterAccess(a,b,c){return this._client.put(`/video/v1/assets/${a}/master-access`,{body:b,defaultBaseURL:"https://api.mux.com",...c})._thenUnwrap(a=>a.data)}updateMP4Support(a,b,c){return this._client.put(`/video/v1/assets/${a}/mp4-support`,{body:b,defaultBaseURL:"https://api.mux.com",...c})._thenUnwrap(a=>a.data)}}class cd extends cb{}cc.AssetsBasePage=cd;class ce extends b9{list(a={},b){return bU(a)?this.list({},a):this._client.getAPIList("/video/v1/delivery-usage",cf,{query:a,defaultBaseURL:"https://api.mux.com",...b})}}class cf extends ca{}ce.DeliveryReportsPageWithTotal=cf;class cg extends b9{retrieve(a,b){return this._client.get(`/video/v1/drm-configurations/${a}`,{defaultBaseURL:"https://api.mux.com",...b})._thenUnwrap(a=>a.data)}list(a={},b){return bU(a)?this.list({},a):this._client.getAPIList("/video/v1/drm-configurations",ch,{query:a,defaultBaseURL:"https://api.mux.com",...b})}}class ch extends cb{}cg.DRMConfigurationsBasePage=ch;class ci extends b9{create(a,b){return this._client.post("/video/v1/live-streams",{body:a,defaultBaseURL:"https://api.mux.com",...b})._thenUnwrap(a=>a.data)}retrieve(a,b){return this._client.get(`/video/v1/live-streams/${a}`,{defaultBaseURL:"https://api.mux.com",...b})._thenUnwrap(a=>a.data)}update(a,b,c){return this._client.patch(`/video/v1/live-streams/${a}`,{body:b,defaultBaseURL:"https://api.mux.com",...c})._thenUnwrap(a=>a.data)}list(a={},b){return bU(a)?this.list({},a):this._client.getAPIList("/video/v1/live-streams",cj,{query:a,defaultBaseURL:"https://api.mux.com",...b})}delete(a,b){return this._client.delete(`/video/v1/live-streams/${a}`,{defaultBaseURL:"https://api.mux.com",...b,headers:{Accept:"*/*",...b?.headers}})}complete(a,b){return this._client.put(`/video/v1/live-streams/${a}/complete`,{defaultBaseURL:"https://api.mux.com",...b,headers:{Accept:"*/*",...b?.headers}})}createPlaybackId(a,b,c){return this._client.post(`/video/v1/live-streams/${a}/playback-ids`,{body:b,defaultBaseURL:"https://api.mux.com",...c})._thenUnwrap(a=>a.data)}createSimulcastTarget(a,b,c){return this._client.post(`/video/v1/live-streams/${a}/simulcast-targets`,{body:b,defaultBaseURL:"https://api.mux.com",...c})._thenUnwrap(a=>a.data)}deleteNewAssetSettingsStaticRenditions(a,b){return this._client.delete(`/video/v1/live-streams/${a}/new-asset-settings/static-renditions`,{defaultBaseURL:"https://api.mux.com",...b,headers:{Accept:"*/*",...b?.headers}})}deletePlaybackId(a,b,c){return this._client.delete(`/video/v1/live-streams/${a}/playback-ids/${b}`,{defaultBaseURL:"https://api.mux.com",...c,headers:{Accept:"*/*",...c?.headers}})}deleteSimulcastTarget(a,b,c){return this._client.delete(`/video/v1/live-streams/${a}/simulcast-targets/${b}`,{defaultBaseURL:"https://api.mux.com",...c,headers:{Accept:"*/*",...c?.headers}})}disable(a,b){return this._client.put(`/video/v1/live-streams/${a}/disable`,{defaultBaseURL:"https://api.mux.com",...b,headers:{Accept:"*/*",...b?.headers}})}enable(a,b){return this._client.put(`/video/v1/live-streams/${a}/enable`,{defaultBaseURL:"https://api.mux.com",...b,headers:{Accept:"*/*",...b?.headers}})}resetStreamKey(a,b){return this._client.post(`/video/v1/live-streams/${a}/reset-stream-key`,{defaultBaseURL:"https://api.mux.com",...b})._thenUnwrap(a=>a.data)}retrievePlaybackId(a,b,c){return this._client.get(`/video/v1/live-streams/${a}/playback-ids/${b}`,{defaultBaseURL:"https://api.mux.com",...c})._thenUnwrap(a=>a.data)}retrieveSimulcastTarget(a,b,c){return this._client.get(`/video/v1/live-streams/${a}/simulcast-targets/${b}`,{defaultBaseURL:"https://api.mux.com",...c})._thenUnwrap(a=>a.data)}updateEmbeddedSubtitles(a,b,c){return this._client.put(`/video/v1/live-streams/${a}/embedded-subtitles`,{body:b,defaultBaseURL:"https://api.mux.com",...c})._thenUnwrap(a=>a.data)}updateGeneratedSubtitles(a,b,c){return this._client.put(`/video/v1/live-streams/${a}/generated-subtitles`,{body:b,defaultBaseURL:"https://api.mux.com",...c})._thenUnwrap(a=>a.data)}updateNewAssetSettingsStaticRenditions(a,b,c){return this._client.put(`/video/v1/live-streams/${a}/new-asset-settings/static-renditions`,{body:b,defaultBaseURL:"https://api.mux.com",...c})._thenUnwrap(a=>a.data)}}class cj extends cb{}ci.LiveStreamsBasePage=cj;class ck extends b9{animated(a,b,c={},d){return bU(c)?this.animated(a,b,{},c):this._client.get(`/${a}/animated.${b}`,{query:c,defaultBaseURL:"https://image.mux.com",...d,headers:{Accept:"image/gif",...d?.headers},__binaryResponse:!0})}hls(a,b={},c){return bU(b)?this.hls(a,{},b):this._client.get(`/${a}.m3u8`,{query:b,defaultBaseURL:"https://stream.mux.com",...c,headers:{Accept:"application/vnd.apple.mpegurl",...c?.headers},__binaryResponse:!0})}staticRendition(a,b,c={},d){return bU(c)?this.staticRendition(a,b,{},c):this._client.get(`/${a}/${b}`,{query:c,defaultBaseURL:"https://stream.mux.com",...d,headers:{Accept:"video/mp4",...d?.headers},__binaryResponse:!0})}storyboard(a,b,c={},d){return bU(c)?this.storyboard(a,b,{},c):this._client.get(`/${a}/storyboard.${b}`,{query:c,defaultBaseURL:"https://image.mux.com",...d,headers:{Accept:"image/jpeg",...d?.headers},__binaryResponse:!0})}storyboardMeta(a,b={},c){return bU(b)?this.storyboardMeta(a,{},b):this._client.get(`/${a}/storyboard.json`,{query:b,defaultBaseURL:"https://image.mux.com",...c})}storyboardVtt(a,b={},c){return bU(b)?this.storyboardVtt(a,{},b):this._client.get(`/${a}/storyboard.vtt`,{query:b,defaultBaseURL:"https://image.mux.com",...c,headers:{Accept:"text/vtt",...c?.headers}})}thumbnail(a,b,c={},d){return bU(c)?this.thumbnail(a,b,{},c):this._client.get(`/${a}/thumbnail.${b}`,{query:c,defaultBaseURL:"https://image.mux.com",...d,headers:{Accept:"image/jpeg",...d?.headers},__binaryResponse:!0})}track(a,b,c={},d){return bU(c)?this.track(a,b,{},c):this._client.get(`/${a}/text/${b}.vtt`,{query:c,defaultBaseURL:"https://stream.mux.com",...d,headers:{Accept:"text/vtt",...d?.headers}})}transcript(a,b,c={},d){return bU(c)?this.transcript(a,b,{},c):this._client.get(`/${a}/text/${b}.txt`,{query:c,defaultBaseURL:"https://stream.mux.com",...d,headers:{Accept:"text/plain",...d?.headers}})}}class cl extends b9{retrieve(a,b){return this._client.get(`/video/v1/playback-ids/${a}`,{defaultBaseURL:"https://api.mux.com",...b})._thenUnwrap(a=>a.data)}}class cm extends b9{create(a,b){return this._client.post("/video/v1/playback-restrictions",{body:a,defaultBaseURL:"https://api.mux.com",...b})._thenUnwrap(a=>a.data)}retrieve(a,b){return this._client.get(`/video/v1/playback-restrictions/${a}`,{defaultBaseURL:"https://api.mux.com",...b})._thenUnwrap(a=>a.data)}list(a={},b){return bU(a)?this.list({},a):this._client.getAPIList("/video/v1/playback-restrictions",cn,{query:a,defaultBaseURL:"https://api.mux.com",...b})}delete(a,b){return this._client.delete(`/video/v1/playback-restrictions/${a}`,{defaultBaseURL:"https://api.mux.com",...b,headers:{Accept:"*/*",...b?.headers}})}updateReferrer(a,b,c){return this._client.put(`/video/v1/playback-restrictions/${a}/referrer`,{body:b,defaultBaseURL:"https://api.mux.com",...c})._thenUnwrap(a=>a.data)}updateUserAgent(a,b,c){return this._client.put(`/video/v1/playback-restrictions/${a}/user_agent`,{body:b,defaultBaseURL:"https://api.mux.com",...c})._thenUnwrap(a=>a.data)}}class cn extends cb{}cm.PlaybackRestrictionsBasePage=cn;class co extends b9{create(a,b){return this._client.post("/video/v1/transcription-vocabularies",{body:a,defaultBaseURL:"https://api.mux.com",...b})._thenUnwrap(a=>a.data)}retrieve(a,b){return this._client.get(`/video/v1/transcription-vocabularies/${a}`,{defaultBaseURL:"https://api.mux.com",...b})._thenUnwrap(a=>a.data)}update(a,b,c){return this._client.put(`/video/v1/transcription-vocabularies/${a}`,{body:b,defaultBaseURL:"https://api.mux.com",...c})._thenUnwrap(a=>a.data)}list(a={},b){return bU(a)?this.list({},a):this._client.getAPIList("/video/v1/transcription-vocabularies",cp,{query:a,defaultBaseURL:"https://api.mux.com",...b})}delete(a,b){return this._client.delete(`/video/v1/transcription-vocabularies/${a}`,{defaultBaseURL:"https://api.mux.com",...b,headers:{Accept:"*/*",...b?.headers}})}}class cp extends cb{}co.TranscriptionVocabulariesBasePage=cp;class cq extends b9{create(a,b){return this._client.post("/video/v1/uploads",{body:a,defaultBaseURL:"https://api.mux.com",...b})._thenUnwrap(a=>a.data)}retrieve(a,b){return this._client.get(`/video/v1/uploads/${a}`,{defaultBaseURL:"https://api.mux.com",...b})._thenUnwrap(a=>a.data)}list(a={},b){return bU(a)?this.list({},a):this._client.getAPIList("/video/v1/uploads",cr,{query:a,defaultBaseURL:"https://api.mux.com",...b})}cancel(a,b){return this._client.put(`/video/v1/uploads/${a}/cancel`,{defaultBaseURL:"https://api.mux.com",...b})._thenUnwrap(a=>a.data)}}class cr extends cb{}cq.UploadsBasePage=cr;class cs extends b9{create(a,b){return this._client.post("/video/v1/web-inputs",{body:a,defaultBaseURL:"https://api.mux.com",...b})._thenUnwrap(a=>a.data)}retrieve(a,b){return this._client.get(`/video/v1/web-inputs/${a}`,{defaultBaseURL:"https://api.mux.com",...b})._thenUnwrap(a=>a.data)}list(a={},b){return bU(a)?this.list({},a):this._client.getAPIList("/video/v1/web-inputs",ct,{query:a,defaultBaseURL:"https://api.mux.com",...b})}delete(a,b){return this._client.delete(`/video/v1/web-inputs/${a}`,{defaultBaseURL:"https://api.mux.com",...b,headers:{Accept:"*/*",...b?.headers}})}launch(a,b){return this._client.put(`/video/v1/web-inputs/${a}/launch`,{defaultBaseURL:"https://api.mux.com",...b})._thenUnwrap(a=>a.data)}reload(a,b){return this._client.put(`/video/v1/web-inputs/${a}/reload`,{defaultBaseURL:"https://api.mux.com",...b})._thenUnwrap(a=>a.data)}shutdown(a,b){return this._client.put(`/video/v1/web-inputs/${a}/shutdown`,{defaultBaseURL:"https://api.mux.com",...b})._thenUnwrap(a=>a.data)}updateURL(a,b,c){return this._client.put(`/video/v1/web-inputs/${a}/url`,{body:b,defaultBaseURL:"https://api.mux.com",...c})._thenUnwrap(a=>a.data)}}class ct extends cb{}cs.WebInputListResponsesBasePage=ct;class cu extends b9{constructor(){super(...arguments),this.assets=new cc(this._client),this.deliveryUsage=new ce(this._client),this.liveStreams=new ci(this._client),this.playbackIds=new cl(this._client),this.playbackRestrictions=new cm(this._client),this.transcriptionVocabularies=new co(this._client),this.uploads=new cq(this._client),this.webInputs=new cs(this._client),this.drmConfigurations=new cg(this._client),this.playback=new ck(this._client)}}cu.Assets=cc,cu.AssetsBasePage=cd,cu.DeliveryUsage=ce,cu.DeliveryReportsPageWithTotal=cf,cu.LiveStreams=ci,cu.LiveStreamsBasePage=cj,cu.PlaybackIDs=cl,cu.PlaybackRestrictions=cm,cu.PlaybackRestrictionsBasePage=cn,cu.TranscriptionVocabularies=co,cu.TranscriptionVocabulariesBasePage=cp,cu.Uploads=cq,cu.UploadsBasePage=cr,cu.WebInputs=cs,cu.WebInputListResponsesBasePage=ct,cu.DRMConfigurations=cg,cu.DRMConfigurationsBasePage=ch,cu.Playback=ck;class cv extends b9{create(a,b){return this._client.post("/data/v1/annotations",{body:a,defaultBaseURL:"https://api.mux.com",...b})._thenUnwrap(a=>a.data)}retrieve(a,b){return this._client.get(`/data/v1/annotations/${a}`,{defaultBaseURL:"https://api.mux.com",...b})._thenUnwrap(a=>a.data)}update(a,b,c){return this._client.patch(`/data/v1/annotations/${a}`,{body:b,defaultBaseURL:"https://api.mux.com",...c})._thenUnwrap(a=>a.data)}list(a={},b){return bU(a)?this.list({},a):this._client.getAPIList("/data/v1/annotations",cw,{query:a,defaultBaseURL:"https://api.mux.com",...b})}delete(a,b){return this._client.delete(`/data/v1/annotations/${a}`,{defaultBaseURL:"https://api.mux.com",...b,headers:{Accept:"*/*",...b?.headers}})}}class cw extends cb{}cv.AnnotationsBasePage=cw;class cx extends b9{list(a){return this._client.get("/data/v1/dimensions",{defaultBaseURL:"https://api.mux.com",...a})}listTraceElements(a,b={},c){return bU(b)?this.listTraceElements(a,{},b):this._client.getAPIList(`/data/v1/dimensions/${a}/elements`,cy,{query:b,defaultBaseURL:"https://api.mux.com",...c})}listValues(a,b={},c){return bU(b)?this.listValues(a,{},b):this._client.getAPIList(`/data/v1/dimensions/${a}`,cy,{query:b,defaultBaseURL:"https://api.mux.com",...c})}}class cy extends cb{}cx.DimensionValuesBasePage=cy;class cz extends b9{list(a={},b){return bU(a)?this.list({},a):this._client.get("/data/v1/errors",{query:a,defaultBaseURL:"https://api.mux.com",...b})}}class cA extends b9{listVideoViews(a){return this._client.get("/data/v1/exports/views",{defaultBaseURL:"https://api.mux.com",...a})}}class cB extends b9{listValues(a,b={},c){return bU(b)?this.listValues(a,{},b):this._client.getAPIList(`/data/v1/filters/${a}`,cC,{query:b,defaultBaseURL:"https://api.mux.com",...c})}}class cC extends cb{}cB.FilterValuesBasePage=cC;class cD extends b9{retrieve(a,b){return this._client.get(`/data/v1/incidents/${a}`,{defaultBaseURL:"https://api.mux.com",...b})}list(a={},b){return bU(a)?this.list({},a):this._client.getAPIList("/data/v1/incidents",cE,{query:a,defaultBaseURL:"https://api.mux.com",...b})}listRelated(a,b={},c){return bU(b)?this.listRelated(a,{},b):this._client.getAPIList(`/data/v1/incidents/${a}/related`,cE,{query:b,defaultBaseURL:"https://api.mux.com",...c})}}class cE extends cb{}cD.IncidentsBasePage=cE;class cF extends b9{list(a={},b){return bU(a)?this.list({},a):this._client.get("/data/v1/metrics/comparison",{query:a,defaultBaseURL:"https://api.mux.com",...b})}getInsights(a,b={},c){return bU(b)?this.getInsights(a,{},b):this._client.get(`/data/v1/metrics/${a}/insights`,{query:b,defaultBaseURL:"https://api.mux.com",...c})}getOverallValues(a,b={},c){return bU(b)?this.getOverallValues(a,{},b):this._client.get(`/data/v1/metrics/${a}/overall`,{query:b,defaultBaseURL:"https://api.mux.com",...c})}getTimeseries(a,b={},c){return bU(b)?this.getTimeseries(a,{},b):this._client.get(`/data/v1/metrics/${a}/timeseries`,{query:b,defaultBaseURL:"https://api.mux.com",...c})}listBreakdownValues(a,b={},c){return bU(b)?this.listBreakdownValues(a,{},b):this._client.getAPIList(`/data/v1/metrics/${a}/breakdown`,cG,{query:b,defaultBaseURL:"https://api.mux.com",...c})}}class cG extends cb{}cF.BreakdownValuesBasePage=cG;class cH extends b9{listDimensions(a){return this._client.get("/data/v1/realtime/dimensions",{defaultBaseURL:"https://api.mux.com",...a})}listMetrics(a){return this._client.get("/data/v1/realtime/metrics",{defaultBaseURL:"https://api.mux.com",...a})}retrieveBreakdown(a,b={},c){return bU(b)?this.retrieveBreakdown(a,{},b):this._client.get(`/data/v1/realtime/metrics/${a}/breakdown`,{query:b,defaultBaseURL:"https://api.mux.com",...c})}retrieveHistogramTimeseries(a,b={},c){return bU(b)?this.retrieveHistogramTimeseries(a,{},b):this._client.get(`/data/v1/realtime/metrics/${a}/histogram-timeseries`,{query:b,defaultBaseURL:"https://api.mux.com",...c})}retrieveTimeseries(a,b={},c){return bU(b)?this.retrieveTimeseries(a,{},b):this._client.get(`/data/v1/realtime/metrics/${a}/timeseries`,{query:b,defaultBaseURL:"https://api.mux.com",...c})}}class cI extends b9{retrieve(a,b){return this._client.get(`/data/v1/video-views/${a}`,{defaultBaseURL:"https://api.mux.com",...b})}list(a={},b){return bU(a)?this.list({},a):this._client.getAPIList("/data/v1/video-views",cJ,{query:a,defaultBaseURL:"https://api.mux.com",...b})}}class cJ extends cb{}cI.AbridgedVideoViewsBasePage=cJ;class cK extends b9{list(a){return this._client.get("/data/v1/monitoring/metrics",{defaultBaseURL:"https://api.mux.com",...a})}getBreakdown(a,b={},c){return bU(b)?this.getBreakdown(a,{},b):this._client.get(`/data/v1/monitoring/metrics/${a}/breakdown`,{query:b,defaultBaseURL:"https://api.mux.com",...c})}getBreakdownTimeseries(a,b={},c){return bU(b)?this.getBreakdownTimeseries(a,{},b):this._client.get(`/data/v1/monitoring/metrics/${a}/breakdown-timeseries`,{query:b,defaultBaseURL:"https://api.mux.com",...c})}getHistogramTimeseries(a,b={},c){return bU(b)?this.getHistogramTimeseries(a,{},b):this._client.get(`/data/v1/monitoring/metrics/${a}/histogram-timeseries`,{query:b,defaultBaseURL:"https://api.mux.com",...c})}getTimeseries(a,b={},c){return bU(b)?this.getTimeseries(a,{},b):this._client.get(`/data/v1/monitoring/metrics/${a}/timeseries`,{query:b,defaultBaseURL:"https://api.mux.com",...c})}}class cL extends b9{constructor(){super(...arguments),this.metrics=new cK(this._client)}listDimensions(a){return this._client.get("/data/v1/monitoring/dimensions",{defaultBaseURL:"https://api.mux.com",...a})}}cL.Metrics=cK;class cM extends b9{constructor(){super(...arguments),this.dimensions=new cx(this._client),this.monitoring=new cL(this._client),this.errors=new cz(this._client),this.exports=new cA(this._client),this.filters=new cB(this._client),this.incidents=new cD(this._client),this.metrics=new cF(this._client),this.realTime=new cH(this._client),this.videoViews=new cI(this._client),this.annotations=new cv(this._client)}}cM.Dimensions=cx,cM.DimensionValuesBasePage=cy,cM.Monitoring=cL,cM.Errors=cz,cM.Exports=cA,cM.Filters=cB,cM.FilterValuesBasePage=cC,cM.Incidents=cD,cM.IncidentsBasePage=cE,cM.Metrics=cF,cM.BreakdownValuesBasePage=cG,cM.RealTime=cH,cM.VideoViews=cI,cM.AbridgedVideoViewsBasePage=cJ,cM.Annotations=cv,cM.AnnotationsBasePage=cw;class cN extends b9{create(a){return this._client.post("/system/v1/signing-keys",{defaultBaseURL:"https://api.mux.com",...a})._thenUnwrap(a=>a.data)}retrieve(a,b){return this._client.get(`/system/v1/signing-keys/${a}`,{defaultBaseURL:"https://api.mux.com",...b})._thenUnwrap(a=>a.data)}list(a={},b){return bU(a)?this.list({},a):this._client.getAPIList("/system/v1/signing-keys",cO,{query:a,defaultBaseURL:"https://api.mux.com",...b})}delete(a,b){return this._client.delete(`/system/v1/signing-keys/${a}`,{defaultBaseURL:"https://api.mux.com",...b,headers:{Accept:"*/*",...b?.headers}})}}class cO extends cb{}cN.SigningKeysBasePage=cO;class cP extends b9{whoami(a){return this._client.get("/system/v1/whoami",{defaultBaseURL:"https://api.mux.com",...a})._thenUnwrap(a=>a.data)}}class cQ extends b9{constructor(){super(...arguments),this.signingKeys=new cN(this._client),this.utilities=new cP(this._client)}}cQ.SigningKeys=cN,cQ.SigningKeysBasePage=cO,cQ.Utilities=cP;var cR=a.i(54799);class cS extends b9{unwrap(a,b,c=this._client.webhookSecret){this.verifySignature(a,b,c);let d=a=>Array.isArray(a)?a.map(d):null!==a&&"object"==typeof a?"nanos"in a&&"seconds"in a?new Date((a.nanos+1e6*a.seconds)/1e3).toISOString():Object.fromEntries(Object.entries(a).map(([a,b])=>[a,d(b)])):a;return d(JSON.parse(a))}parseHeader(a,b){return"string"!=typeof a?null:a.split(",").reduce((a,c)=>{let d=c.split("=");return"t"===d[0]&&(a.timestamp=parseInt(d[1],10)),d[0]===b&&"string"==typeof d[1]&&a.signatures.push(d[1]),a},{timestamp:-1,signatures:[]})}assert(a,b=""){if(!a)throw Error(b)}computeSignature(a,b){return cR.default.createHmac("sha256",b).update(a,"utf8").digest("hex")}timingSafeEqual(a,b){if(a.byteLength!==b.byteLength)return!1;a instanceof DataView||(a=new DataView(ArrayBuffer.isView(a)?a.buffer:a)),b instanceof DataView||(b=new DataView(ArrayBuffer.isView(b)?b.buffer:b)),this.assert(a instanceof DataView),this.assert(b instanceof DataView);let c=a.byteLength,d=0,e=-1;for(;++e<c;)d|=a.getUint8(e)^b.getUint8(e);return 0===d}verifySignature(a,b,c=this._client.webhookSecret){if(!c)throw Error("The webhook secret must either be set using the env var, MUX_WEBHOOK_SECRET, on the client class, Mux({ webhookSecret: '123' }), or passed to this function");let d=((a,b)=>{let c=b8(a,b);if(void 0===c)throw Error(`Could not find ${b} header`);return c})(b,"mux-signature");if(!d)throw Error("Could not find a mux-signature header");if("string"!=typeof a)throw Error("Webhook body must be passed as the raw JSON string sent from the server (do not parse it first).");let e=this.parseHeader(d,"v1");if(!e||-1===e.timestamp)throw Error("Unable to extract timestamp and signatures from header");if(!e.signatures.length)throw Error("No v1 signatures found");let f=this.computeSignature(`${e.timestamp}.${a}`,c),g=new TextEncoder;if(!e.signatures.filter(a=>this.timingSafeEqual(g.encode(a),g.encode(f))).length)throw Error("No signatures found matching the expected signature for payload.");if(Math.floor(Date.now()/1e3)-e.timestamp>300)throw Error("Webhook timestamp is too old")}}var cT=a.i(874);let cU=new TextEncoder,cV=new TextDecoder;d=cT.Buffer.isEncoding("base64url")?a=>cT.Buffer.from(a).toString("base64url"):a=>cT.Buffer.from(a).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");class cW extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(a){var b;super(a),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null==(b=Error.captureStackTrace)||b.call(Error,this,this.constructor)}}class cX extends cW{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class cY extends cW{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class cZ extends cW{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}let c$=cR.webcrypto,c_=a9.types.isCryptoKey?a=>a9.types.isCryptoKey(a):a=>!1,c0=a9.types.isKeyObject?a=>a9.types.isKeyObject(a):a=>null!=a&&a instanceof cR.KeyObject;function c1(a,b,...c){if(c.length>2){let b=c.pop();a+=`one of type ${c.join(", ")}, or ${b}.`}else 2===c.length?a+=`one of type ${c[0]} or ${c[1]}.`:a+=`of type ${c[0]}.`;return null==b?a+=` Received ${b}`:"function"==typeof b&&b.name?a+=` Received function ${b.name}`:"object"==typeof b&&null!=b&&b.constructor&&b.constructor.name&&(a+=` Received an instance of ${b.constructor.name}`),a}let c2=(a,...b)=>c1("Key must be ",a,...b);function c3(a,b,...c){return c1(`Key for the ${a} algorithm must be `,b,...c)}let c4=a=>c0(a)||c_(a),c5=["KeyObject"];(globalThis.CryptoKey||(null==c$?void 0:c$.CryptoKey))&&c5.push("CryptoKey");let c6=cT.Buffer.from([42,134,72,206,61,3,1,7]),c7=cT.Buffer.from([43,129,4,0,34]),c8=cT.Buffer.from([43,129,4,0,35]),c9=cT.Buffer.from([43,129,4,0,10]),da=new WeakMap,db=(a,b)=>{var c;let d;if(c_(a))d=cR.KeyObject.from(a);else if(c0(a))d=a;else throw TypeError(c2(a,...c5));if("secret"===d.type)throw TypeError('only "private" or "public" type keys can be used for this operation');switch(d.asymmetricKeyType){case"ed25519":case"ed448":return`Ed${d.asymmetricKeyType.slice(2)}`;case"x25519":case"x448":return`X${d.asymmetricKeyType.slice(1)}`;case"ec":{if(da.has(d))return da.get(d);let a=null==(c=d.asymmetricKeyDetails)?void 0:c.namedCurve;if(a||"private"!==d.type){if(!a){let b=d.export({format:"der",type:"spki"}),c=b[1]<128?14:15,e=b[c],f=b.slice(c+1,c+1+e);if(f.equals(c6))a="prime256v1";else if(f.equals(c7))a="secp384r1";else if(f.equals(c8))a="secp521r1";else if(f.equals(c9))a="secp256k1";else throw new cX("Unsupported key curve for this operation")}}else a=db((0,cR.createPublicKey)(d),!0);if(b)return a;let e=(a=>{switch(a){case"prime256v1":return"P-256";case"secp384r1":return"P-384";case"secp521r1":return"P-521";case"secp256k1":return"secp256k1";default:throw new cX("Unsupported key curve for this operation")}})(a);return da.set(d,e),e}default:throw TypeError("Invalid asymmetric key type for this operation")}},dc=new WeakMap,dd=(a,b)=>{let c=a.readUInt8(1);if((128&c)==0)return 0===b?c:dd(a.subarray(2+c),b-1);let d=127&c;c=0;for(let b=0;b<d;b++)c<<=8,c|=a.readUInt8(2+b);return 0===b?c:dd(a.subarray(2+c),b-1)},de=(a,b)=>{if(2048>(a=>{var b,c,d,e;let f;if(dc.has(a))return dc.get(a);let g=null!=(c=null==(b=a.asymmetricKeyDetails)?void 0:b.modulusLength)?c:(d=a.export({format:"der",type:"pkcs1"}),e=+("private"===a.type),((128&(f=d.readUInt8(1)))==0?dd(d.subarray(2),e):dd(d.subarray(2+(127&f)),e))-1<<3);return dc.set(a,g),g})(a))throw TypeError(`${b} requires key modulusLength to be 2048 bits or larger`)},[df,dg]=process.versions.node.split(".").map(a=>parseInt(a,10)),dh=!("electron"in process.versions)&&(df>=17||16===df&&dg>=9),di={padding:cR.constants.RSA_PKCS1_PSS_PADDING,saltLength:cR.constants.RSA_PSS_SALTLEN_DIGEST},dj=new Map([["ES256","P-256"],["ES256K","secp256k1"],["ES384","P-384"],["ES512","P-521"]]);function dk(a,b="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${b} must be ${a}`)}function dl(a,b){return a.name===b}function dm(a){return parseInt(a.name.slice(4),10)}e=cR.sign.length>3?(0,a9.promisify)(cR.sign):cR.sign;let dn=async(a,b,c)=>{let d=function(a,b,c){if(b instanceof Uint8Array){if(!a.startsWith("HS"))throw TypeError(c2(b,...c5));return(0,cR.createSecretKey)(b)}if(b instanceof cR.KeyObject)return b;if(c_(b))return!function(a,b,...c){switch(b){case"HS256":case"HS384":case"HS512":{if(!dl(a.algorithm,"HMAC"))throw dk("HMAC");let c=parseInt(b.slice(2),10);if(dm(a.algorithm.hash)!==c)throw dk(`SHA-${c}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!dl(a.algorithm,"RSASSA-PKCS1-v1_5"))throw dk("RSASSA-PKCS1-v1_5");let c=parseInt(b.slice(2),10);if(dm(a.algorithm.hash)!==c)throw dk(`SHA-${c}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!dl(a.algorithm,"RSA-PSS"))throw dk("RSA-PSS");let c=parseInt(b.slice(2),10);if(dm(a.algorithm.hash)!==c)throw dk(`SHA-${c}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==a.algorithm.name&&"Ed448"!==a.algorithm.name)throw dk("Ed25519 or Ed448");break;case"ES256":case"ES384":case"ES512":{if(!dl(a.algorithm,"ECDSA"))throw dk("ECDSA");let c=function(a){switch(a){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(b);if(a.algorithm.namedCurve!==c)throw dk(c,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}if(c.length&&!c.some(b=>a.usages.includes(b))){let a="CryptoKey does not support this operation, its usages must include ";if(c.length>2){let b=c.pop();a+=`one of ${c.join(", ")}, or ${b}.`}else 2===c.length?a+=`one of ${c[0]} or ${c[1]}.`:a+=`${c[0]}.`;throw TypeError(a)}}(b,a,c),cR.KeyObject.from(b);throw TypeError(c2(b,...c5,"Uint8Array"))}(a,b,"sign");if(a.startsWith("HS")){let b=cR.createHmac(function(a){switch(a){case"HS256":return"sha256";case"HS384":return"sha384";case"HS512":return"sha512";default:throw new cX(`alg ${a} is not supported either by JOSE or your javascript runtime`)}}(a),d);return b.update(c),b.digest()}return e(function(a){switch(a){case"PS256":case"RS256":case"ES256":case"ES256K":return"sha256";case"PS384":case"RS384":case"ES384":return"sha384";case"PS512":case"RS512":case"ES512":return"sha512";case"EdDSA":return;default:throw new cX(`alg ${a} is not supported either by JOSE or your javascript runtime`)}}(a),c,function(a,b){switch(a){case"EdDSA":if(!["ed25519","ed448"].includes(b.asymmetricKeyType))throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519 or ed448");return b;case"RS256":case"RS384":case"RS512":if("rsa"!==b.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");return de(b,a),b;case dh&&"PS256":case dh&&"PS384":case dh&&"PS512":if("rsa-pss"===b.asymmetricKeyType){let{hashAlgorithm:c,mgf1HashAlgorithm:d,saltLength:e}=b.asymmetricKeyDetails,f=parseInt(a.slice(-3),10);if(void 0!==c&&(c!==`sha${f}`||d!==c))throw TypeError(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${a}`);if(void 0!==e&&e>f>>3)throw TypeError(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${a}`)}else if("rsa"!==b.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa or rsa-pss");return de(b,a),{key:b,...di};case!dh&&"PS256":case!dh&&"PS384":case!dh&&"PS512":if("rsa"!==b.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");return de(b,a),{key:b,...di};case"ES256":case"ES256K":case"ES384":case"ES512":{if("ec"!==b.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ec");let c=db(b),d=dj.get(a);if(c!==d)throw TypeError(`Invalid key curve for the algorithm, its curve must be ${d}, got ${c}`);return{dsaEncoding:"ieee-p1363",key:b}}default:throw new cX(`alg ${a} is not supported either by JOSE or your javascript runtime`)}}(a,d))},dp=function(a,b,c,d,e){let f;if(void 0!==e.crit&&void 0===d.crit)throw new a('"crit" (Critical) Header Parameter MUST be integrity protected');if(!d||void 0===d.crit)return new Set;if(!Array.isArray(d.crit)||0===d.crit.length||d.crit.some(a=>"string"!=typeof a||0===a.length))throw new a('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let g of(f=void 0!==c?new Map([...Object.entries(c),...b.entries()]):b,d.crit)){if(!f.has(g))throw new cX(`Extension Header Parameter "${g}" is not recognized`);if(void 0===e[g])throw new a(`Extension Header Parameter "${g}" is missing`);if(f.get(g)&&void 0===d[g])throw new a(`Extension Header Parameter "${g}" MUST be integrity protected`)}return new Set(d.crit)};class dq{constructor(a){if(!(a instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this._payload=a}setProtectedHeader(a){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=a,this}setUnprotectedHeader(a){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=a,this}async sign(a,b){let c;if(!this._protectedHeader&&!this._unprotectedHeader)throw new cY("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!((...a)=>{let b,c=a.filter(Boolean);if(0===c.length||1===c.length)return!0;for(let a of c){let c=Object.keys(a);if(!b||0===b.size){b=new Set(c);continue}for(let a of c){if(b.has(a))return!1;b.add(a)}}return!0})(this._protectedHeader,this._unprotectedHeader))throw new cY("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let e={...this._protectedHeader,...this._unprotectedHeader},f=dp(cY,new Map([["b64",!0]]),null==b?void 0:b.crit,this._protectedHeader,e),g=!0;if(f.has("b64")&&"boolean"!=typeof(g=this._protectedHeader.b64))throw new cY('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:h}=e;if("string"!=typeof h||!h)throw new cY('JWS "alg" (Algorithm) Header Parameter missing or invalid');var i=h,j=a,k="sign";if(i.startsWith("HS")||"dir"===i||i.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(i)){if(!(j instanceof Uint8Array)){if(!c4(j))throw TypeError(c3(i,j,...c5,"Uint8Array"));if("secret"!==j.type)throw TypeError(`${c5.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}}else{if(!c4(j))throw TypeError(c3(i,j,...c5));if("secret"===j.type)throw TypeError(`${c5.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===k&&"public"===j.type)throw TypeError(`${c5.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===k&&"public"===j.type)throw TypeError(`${c5.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(j.algorithm&&"verify"===k&&"private"===j.type)throw TypeError(`${c5.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(j.algorithm&&"encrypt"===k&&"private"===j.type)throw TypeError(`${c5.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)}let l=this._payload;g&&(l=cU.encode(d(l)));let m=function(...a){let b=new Uint8Array(a.reduce((a,{length:b})=>a+b,0)),c=0;return a.forEach(a=>{b.set(a,c),c+=a.length}),b}(c=this._protectedHeader?cU.encode(d(JSON.stringify(this._protectedHeader))):cU.encode(""),cU.encode("."),l),n={signature:d(await dn(h,a,m)),payload:""};return g&&(n.payload=cV.decode(l)),this._unprotectedHeader&&(n.header=this._unprotectedHeader),this._protectedHeader&&(n.protected=cV.decode(c)),n}}class dr{constructor(a){this._flattened=new dq(a)}setProtectedHeader(a){return this._flattened.setProtectedHeader(a),this}async sign(a,b){let c=await this._flattened.sign(a,b);if(void 0===c.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${c.protected}.${c.payload}.${c.signature}`}}let ds=a=>Math.floor(a.getTime()/1e3),dt=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i,du=a=>{let b=dt.exec(a);if(!b)throw TypeError("Invalid time period format");let c=parseFloat(b[1]);switch(b[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(c);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(60*c);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(3600*c);case"day":case"days":case"d":return Math.round(86400*c);case"week":case"weeks":case"w":return Math.round(604800*c);default:return Math.round(0x1e187e0*c)}};class dv{constructor(a){if(!function(a){if("object"!=typeof a||null===a||"[object Object]"!==Object.prototype.toString.call(a))return!1;if(null===Object.getPrototypeOf(a))return!0;let b=a;for(;null!==Object.getPrototypeOf(b);)b=Object.getPrototypeOf(b);return Object.getPrototypeOf(a)===b}(a))throw TypeError("JWT Claims Set MUST be an object");this._payload=a}setIssuer(a){return this._payload={...this._payload,iss:a},this}setSubject(a){return this._payload={...this._payload,sub:a},this}setAudience(a){return this._payload={...this._payload,aud:a},this}setJti(a){return this._payload={...this._payload,jti:a},this}setNotBefore(a){return"number"==typeof a?this._payload={...this._payload,nbf:a}:this._payload={...this._payload,nbf:ds(new Date)+du(a)},this}setExpirationTime(a){return"number"==typeof a?this._payload={...this._payload,exp:a}:this._payload={...this._payload,exp:ds(new Date)+du(a)},this}setIssuedAt(a){return void 0===a?this._payload={...this._payload,iat:ds(new Date)}:this._payload={...this._payload,iat:a},this}}class dw extends dv{setProtectedHeader(a){return this._protectedHeader=a,this}async sign(a,b){var c;let d=new dr(cU.encode(JSON.stringify(this._payload)));if(d.setProtectedHeader(this._protectedHeader),Array.isArray(null==(c=this._protectedHeader)?void 0:c.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new cZ("JWTs MUST NOT use unencoded payload");return d.sign(a,b)}}var dx=a.i(22734);function dy(a){return"object"==typeof a&&null!=a&&"string"==typeof a.type}function dz(a,b,c){let d=new dw({...a,...c.keyid?{kid:c.keyid}:null}).setProtectedHeader({alg:c.algorithm||"RS256"});return c.issuer&&d.setIssuer(c.issuer),c.subject&&d.setSubject(c.subject),c.audience&&d.setAudience(c.audience),c.notBefore&&d.setNotBefore(c.notBefore),c.expiresIn&&d.setExpirationTime(c.expiresIn),d.sign(b)}function dA(a,b){let c=b.keyId||a.jwtSigningKey;if(!c)throw Error("Signing key required; pass a keyId option to mux.jwt.sign*(), a jwtSigningKey option to new Mux(), or set the MUX_SIGNING_KEY environment variable");return c}async function dB(a,b){let c=await dC(a,b);return dy(c)?c:(0,cR.createPrivateKey)(c)}async function dC(a,b){let c;if(b.keySecret?c=b.keySecret:b.keyFilePath?c=await dx.default.promises.readFile(b.keyFilePath,"utf8"):a.jwtPrivateKey&&(c=a.jwtPrivateKey),Buffer.isBuffer(c)||dy(c))return c;if("string"==typeof c){if((c=c.trim()).startsWith("-----BEGIN"))return c;try{if((c=Buffer.from(c,"base64").toString()).startsWith("-----BEGIN"))return c}catch(a){}throw TypeError("Specified signing key must be either a valid PKCS1 or PKCS8 PEM string, a base64 encoded PEM, or an imported key")}throw TypeError("Private key required; pass a keySecret or keyFilePath option to mux.jwt.sign*(), a jwtPrivateKey option to new Mux(), or set the MUX_PRIVATE_KEY environment variable")}Uint8Array.of(2,1,0,48,13,6,9,42,134,72,134,247,13,1,1,1,5,0),(l=D||(D={})).video="v",l.thumbnail="t",l.gif="g",l.storyboard="s",l.stats="playback_id",l.drm_license="d",(m=E||(E={})).video="playback-token",m.thumbnail="thumbnail-token",m.storyboard="storyboard-token",m.drm_license="drm-token",m.gif="gif-token",m.stats="stats-token",(n=F||(F={})).video="video_id",n.asset="asset_id",n.playback="playback_id",n.live_stream="live_stream_id";class dD extends b9{async signPlaybackId(a,b={}){return Array.isArray(b.type)?this.signPlaybackIdMultipleTypes(a,b):this.signPlaybackIdSingleType(a,b)}async signPlaybackIdSingleType(a,b){let c=D[b.type??"video"];if(!c)throw Error(`Invalid signature type: ${b.type}; Expected one of ${Object.keys(D)}`);let d={keyid:dA(this._client,b),subject:a,audience:c,expiresIn:b.expiration??"7d",noTimestamp:!0,algorithm:"RS256"};return dz(b.params??{},await dB(this._client,b),d)}async signPlaybackIdMultipleTypes(a,b){let c={};for(let d of b.type){let e,f;Array.isArray(d)?[e,f]=d:(e=d,f=void 0);let g={...b,type:e,params:{...b.params,...f}},h=await this.signPlaybackIdSingleType(a,g),i=E[e];i&&(c[i]=h)}return c}async signDrmLicense(a,b={}){let c=D[b.type??"drm_license"];if(!c)throw Error(`Invalid signature type: ${b.type}; Expected one of ${Object.keys(D)}`);let d={keyid:dA(this._client,b),subject:a,audience:c,expiresIn:b.expiration??"7d",noTimestamp:!0,algorithm:"RS256"};return dz(b.params??{},await dB(this._client,b),d)}async signSpaceId(a,b={}){let c={keyid:dA(this._client,b),subject:a,audience:"rt",expiresIn:b.expiration??"7d",noTimestamp:!0,algorithm:"RS256"};return dz(b.params??{},await dB(this._client,b),c)}async signViewerCounts(a,b={}){let c=F[b.type??"video"];if(!c)throw Error(`Invalid signature type: ${b.type}; Expected one of ${Object.keys(F)}`);let d={keyid:dA(this._client,b),subject:a,audience:c,expiresIn:b.expiration??"7d",noTimestamp:!0,algorithm:"RS256"};return dz(b.params??{},await dB(this._client,b),d)}}class dE extends bP{constructor({baseURL:a=b2("MUX_BASE_URL"),tokenId:b=b2("MUX_TOKEN_ID")??null,tokenSecret:c=b2("MUX_TOKEN_SECRET")??null,webhookSecret:d=b2("MUX_WEBHOOK_SECRET")??null,jwtSigningKey:e=b2("MUX_SIGNING_KEY")??null,jwtPrivateKey:f=b2("MUX_PRIVATE_KEY")??null,authorizationToken:g=b2("MUX_AUTHORIZATION_TOKEN")??null,...h}={}){const i={tokenId:b,tokenSecret:c,webhookSecret:d,jwtSigningKey:e,jwtPrivateKey:f,authorizationToken:g,...h,baseURL:a||"https://api.mux.com"};super({baseURL:i.baseURL,baseURLOverridden:!!a&&"https://api.mux.com"!==a,timeout:i.timeout??6e4,httpAgent:i.httpAgent,maxRetries:i.maxRetries,fetch:i.fetch}),G.add(this),this.video=new cu(this),this.data=new cM(this),this.system=new cQ(this),this.webhooks=new cS(this),this.jwt=new dD(this),this._options=i,this.tokenId=b,this.tokenSecret=c,this.webhookSecret=d,this.jwtSigningKey=e,this.jwtPrivateKey=f,this.authorizationToken=g}defaultQuery(){return this._options.defaultQuery}defaultHeaders(a){return{...super.defaultHeaders(a),...this._options.defaultHeaders}}validateHeaders(a,b){if((!this.tokenId||!this.tokenSecret||!a.authorization)&&null!==b.authorization&&(!this.authorizationToken||!a.authorization)&&null!==b.authorization)throw Error("Could not resolve authentication method. Expected token tokenId and tokenSecret to be set.")}authHeaders(a){return{...this.accessTokenAuth(a),...this.authorizationTokenAuth(a)}}accessTokenAuth(a){if(!this.tokenId||!this.tokenSecret)return{};let b=`${this.tokenId}:${this.tokenSecret}`;return{Authorization:`Basic ${(a=>{if(!a)return"";if("undefined"!=typeof Buffer)return Buffer.from(a).toString("base64");if("undefined"!=typeof btoa)return btoa(a);throw new ab("Cannot generate b64 string; Expected `Buffer` or `btoa` to be defined")})(b)}`}}authorizationTokenAuth(a){return null==this.authorizationToken?{}:{Authorization:`Bearer ${this.authorizationToken}`}}stringifyQuery(a){return function(a,b={}){let c,d=a,e=function(a=$){let b;if(void 0!==a.allowEmptyArrays&&"boolean"!=typeof a.allowEmptyArrays)throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==a.encodeDotInKeys&&"boolean"!=typeof a.encodeDotInKeys)throw TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==a.encoder&&void 0!==a.encoder&&"function"!=typeof a.encoder)throw TypeError("Encoder has to be a function.");let c=a.charset||$.charset;if(void 0!==a.charset&&"utf-8"!==a.charset&&"iso-8859-1"!==a.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let d=P;if(void 0!==a.format){if(!U.call(Q,a.format))throw TypeError("Unknown format option provided.");d=a.format}let e=Q[d],f=$.filter;if(("function"==typeof a.filter||W(a.filter))&&(f=a.filter),b=a.arrayFormat&&a.arrayFormat in V?a.arrayFormat:"indices"in a?a.indices?"indices":"repeat":$.arrayFormat,"commaRoundTrip"in a&&"boolean"!=typeof a.commaRoundTrip)throw TypeError("`commaRoundTrip` must be a boolean, or absent");let g=void 0===a.allowDots?!0==!!a.encodeDotInKeys||$.allowDots:!!a.allowDots;return{addQueryPrefix:"boolean"==typeof a.addQueryPrefix?a.addQueryPrefix:$.addQueryPrefix,allowDots:g,allowEmptyArrays:"boolean"==typeof a.allowEmptyArrays?!!a.allowEmptyArrays:$.allowEmptyArrays,arrayFormat:b,charset:c,charsetSentinel:"boolean"==typeof a.charsetSentinel?a.charsetSentinel:$.charsetSentinel,commaRoundTrip:!!a.commaRoundTrip,delimiter:void 0===a.delimiter?$.delimiter:a.delimiter,encode:"boolean"==typeof a.encode?a.encode:$.encode,encodeDotInKeys:"boolean"==typeof a.encodeDotInKeys?a.encodeDotInKeys:$.encodeDotInKeys,encoder:"function"==typeof a.encoder?a.encoder:$.encoder,encodeValuesOnly:"boolean"==typeof a.encodeValuesOnly?a.encodeValuesOnly:$.encodeValuesOnly,filter:f,format:d,formatter:e,serializeDate:"function"==typeof a.serializeDate?a.serializeDate:$.serializeDate,skipNulls:"boolean"==typeof a.skipNulls?a.skipNulls:$.skipNulls,sort:"function"==typeof a.sort?a.sort:null,strictNullHandling:"boolean"==typeof a.strictNullHandling?a.strictNullHandling:$.strictNullHandling}}(b);"function"==typeof e.filter?d=(0,e.filter)("",d):W(e.filter)&&(c=e.filter);let f=[];if("object"!=typeof d||null===d)return"";let g=V[e.arrayFormat],h="comma"===g&&e.commaRoundTrip;c||(c=Object.keys(d)),e.sort&&c.sort(e.sort);let i=new WeakMap;for(let a=0;a<c.length;++a){let b=c[a];e.skipNulls&&null===d[b]||Y(f,function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t,u;let v,w=b,x=s,y=0,z=!1;for(;void 0!==(x=x.get(_))&&!z;){let a=x.get(b);if(y+=1,void 0!==a)if(a===y)throw RangeError("Cyclic object value");else z=!0;void 0===x.get(_)&&(y=0)}if("function"==typeof k?w=k(c,w):w instanceof Date?w=n?.(w):"comma"===d&&W(w)&&(w=T(w,function(a){return a instanceof Date?n?.(a):a})),null===w){if(g)return j&&!q?j(c,$.encoder,r,"key",o):c;w=""}if("string"==typeof(t=w)||"number"==typeof t||"boolean"==typeof t||"symbol"==typeof t||"bigint"==typeof t||(u=w)&&"object"==typeof u&&u.constructor&&u.constructor.isBuffer&&u.constructor.isBuffer(u)){if(j){let a=q?c:j(c,$.encoder,r,"key",o);return[p?.(a)+"="+p?.(j(w,$.encoder,r,"value",o))]}return[p?.(c)+"="+p?.(String(w))]}let A=[];if(void 0===w)return A;if("comma"===d&&W(w))q&&j&&(w=T(w,j)),v=[{value:w.length>0?w.join(",")||null:void 0}];else if(W(k))v=k;else{let a=Object.keys(w);v=l?a.sort(l):a}let B=i?String(c).replace(/\./g,"%2E"):String(c),C=e&&W(w)&&1===w.length?B+"[]":B;if(f&&W(w)&&0===w.length)return C+"[]";for(let c=0;c<v.length;++c){let t=v[c],u="object"==typeof t&&void 0!==t.value?t.value:w[t];if(h&&null===u)continue;let x=m&&i?t.replace(/\./g,"%2E"):t,z=W(w)?"function"==typeof d?d(C,x):C:C+(m?"."+x:"["+x+"]");s.set(b,y);let B=new WeakMap;B.set(_,s),Y(A,a(u,z,d,e,f,g,h,i,"comma"===d&&q&&W(w)?null:j,k,l,m,n,o,p,q,r,B))}return A}(d[b],b,g,h,e.allowEmptyArrays,e.strictNullHandling,e.skipNulls,e.encodeDotInKeys,e.encode?e.encoder:null,e.filter,e.sort,e.allowDots,e.serializeDate,e.format,e.formatter,e.encodeValuesOnly,e.charset,i))}let j=f.join(e.delimiter),k=!0===e.addQueryPrefix?"?":"";return e.charsetSentinel&&("iso-8859-1"===e.charset?k+="utf8=%26%2310003%3B&":k+="utf8=%E2%9C%93&"),j.length>0?k+j:""}(a,{arrayFormat:"brackets"})}}G=new WeakSet,dE.Mux=dE,dE.DEFAULT_TIMEOUT=6e4,dE.MuxError=ab,dE.APIError=ac,dE.APIConnectionError=ae,dE.APIConnectionTimeoutError=af,dE.APIUserAbortError=ad,dE.NotFoundError=aj,dE.ConflictError=ak,dE.RateLimitError=am,dE.BadRequestError=ag,dE.AuthenticationError=ah,dE.InternalServerError=an,dE.PermissionDeniedError=ai,dE.UnprocessableEntityError=al,dE.toFile=bG,dE.fileFromPath=j,dE.Video=cu,dE.Data=cM,dE.System=cQ,dE.Webhooks=cS;let dF=new dE({tokenId:process.env.MUX_TOKEN_ID,tokenSecret:process.env.MUX_TOKEN_SECRET});a.s(["mux",0,dF],58313);var dG=a.i(26092),dH=a.i(56511),dI=a.i(39138),dJ=a.i(63985);async function dK(){if(!await (0,M.getSession)())return[];try{await (0,M.checkPermission)(dG.PERMISSIONS.MANAGE_MEDIA);let a=(0,L.join)(process.cwd(),"public","uploads"),b=[],c=async(a,d)=>{for(let e of(await (0,K.readdir)(a,{withFileTypes:!0})))if(e.isDirectory()){let f=d?`${d}/${e.name}`:e.name;b.push(f),await c((0,L.join)(a,e.name),f)}};return await c(a,""),b}catch(a){return console.error("Get folders error:",a),[]}}async function dL(a){if(!await (0,M.getSession)())return{message:"Sesi berakhir, silakan login kembali"};try{if(await (0,M.checkPermission)(dG.PERMISSIONS.MANAGE_MEDIA),a.includes("..")||a.startsWith("/"))return{message:"Nama folder tidak valid"};let b=(0,L.join)(process.cwd(),"public","uploads"),c=(0,L.join)(b,a);try{return await (0,K.stat)(c),{message:"Folder sudah ada"}}catch{}return await (0,K.mkdir)(c,{recursive:!0}),await (0,dJ.createAuditLog)("MEDIA_FOLDER_CREATE",void 0,`Created folder: ${a}`),(0,dH.revalidatePath)("/admin","layout"),{success:!0,message:"Folder berhasil dibuat"}}catch(a){return{message:"Gagal membuat folder: "+(a instanceof Error?a.message:"Terjadi kesalahan")}}}async function dM(b){if(!await (0,M.getSession)())return{message:"Sesi berakhir, silakan login kembali"};try{if(await (0,M.checkPermission)(dG.PERMISSIONS.MANAGE_MEDIA),b.includes("..")||b.startsWith("/"))return{message:"Nama folder tidak valid"};let c=(0,L.join)(process.cwd(),"public","uploads"),d=(0,L.join)(c,b);try{await (0,K.stat)(d)}catch{return{message:"Folder tidak ditemukan"}}if((await (0,K.readdir)(d)).length>0)return{message:"Folder tidak kosong. Harap hapus atau pindahkan isinya terlebih dahulu."};let{rmdir:e}=await a.A(60815);return await e(d),await (0,dJ.createAuditLog)("MEDIA_FOLDER_DELETE",void 0,`Deleted folder: ${b}`),(0,dH.revalidatePath)("/admin","layout"),{success:!0,message:"Folder berhasil dihapus"}}catch(a){return{message:"Gagal menghapus folder: "+(a instanceof Error?a.message:"Terjadi kesalahan")}}}async function dN(a){if(!await (0,M.getSession)())return{error:"Sesi berakhir, silakan login kembali"};try{await (0,M.checkPermission)(dG.PERMISSIONS.MANAGE_MEDIA);let b=a.get("file");if(!b)return{error:"Tidak ada file yang diunggah"};let c=a.get("folder"),d="other";if(b.type.startsWith("image/")?d="image":b.type.startsWith("video/")?d="video":b.type.startsWith("audio/")?d="audio":("application/pdf"===b.type||b.type.includes("msword")||b.type.includes("officedocument"))&&(d="document"),b.size>0x3200000)return{error:"Ukuran file maksimal 50MB"};let e=await b.arrayBuffer(),f=Buffer.from(e),g=b.name.replace(/[^a-zA-Z0-9.-]/g,"_"),h=Date.now()+"-"+Math.round(1e9*Math.random()),i=`${h}-${g}`,j=(0,L.join)(process.cwd(),"public","uploads");await (0,K.mkdir)(j,{recursive:!0});let k=(0,L.join)(j,i);await (0,K.writeFile)(k,f);let l=`/uploads/${i}`,[m]=await I.db.insert(J.medias).values({name:b.name,fileKey:i,type:d,provider:"local",mimeType:b.type,fileSize:b.size,url:l,metadata:c?{folder:c}:null}).$returningId();return await (0,dJ.createAuditLog)("MEDIA_UPLOAD",m.id,`Uploaded file: ${b.name} (local)`),(0,dH.revalidatePath)("/admin","layout"),{url:l,id:m.id}}catch(a){return console.error("Upload error:",a),{error:"Gagal mengunggah file: "+(a instanceof Error?a.message:"Terjadi kesalahan tidak dikenal")}}}async function dO(a){if(!await (0,M.getSession)())return{message:"Sesi berakhir, silakan login kembali"};try{await (0,M.checkPermission)(dG.PERMISSIONS.MANAGE_MEDIA);let b=(await I.db.select().from(J.medias).where((0,N.eq)(J.medias.id,a)).limit(1))[0];if(!b)return{message:"Media tidak ditemukan"};if("local"===b.provider){let a=(0,L.join)(process.cwd(),"public",b.url.startsWith("/")?b.url.substring(1):b.url);try{await (0,K.unlink)(a)}catch(a){console.error("Failed to delete local file:",a)}}else if("mux"===b.provider){let a=b.metadata;if(a?.assetId)try{await dF.video.assets.delete(a.assetId)}catch(a){console.error("Failed to delete Mux asset:",a)}}return await I.db.delete(J.medias).where((0,N.eq)(J.medias.id,a)),await (0,dJ.createAuditLog)("MEDIA_DELETE",a,`Deleted media: ${b.name}`),(0,dH.revalidatePath)("/admin","layout"),{success:!0,message:"Media berhasil dihapus"}}catch(a){return console.error("Delete media error:",a),{message:"Gagal menghapus media: "+(a instanceof Error?a.message:"Terjadi kesalahan tidak dikenal")}}}async function dP(){if(!await (0,M.getSession)())return[];try{return await (0,M.checkPermission)(dG.PERMISSIONS.MANAGE_MEDIA),await I.db.select().from(J.medias).orderBy((0,O.desc)(J.medias.createdAt))}catch(a){return console.error("Get medias error:",a),[]}}async function dQ(a,b){if(!await (0,M.getSession)())return{message:"Sesi berakhir, silakan login kembali"};try{await (0,M.checkPermission)(dG.PERMISSIONS.MANAGE_MEDIA);let c=(await I.db.select().from(J.medias).where((0,N.eq)(J.medias.id,a)).limit(1))[0];if(!c)return{message:"Media tidak ditemukan"};let d=(0,dI.parseMetadata)(c.metadata);return await I.db.update(J.medias).set({metadata:{...d,folder:b||null}}).where((0,N.eq)(J.medias.id,a)),await (0,dJ.createAuditLog)("MEDIA_MOVE",a,`Moved media ${c.name} to folder: ${b||"Root"}`),(0,dH.revalidatePath)("/admin","layout"),{success:!0,message:"Media berhasil dipindahkan"}}catch(a){return{message:"Gagal memindahkan media: "+(a instanceof Error?a.message:"Terjadi kesalahan")}}}async function dR(){if(!await (0,M.getSession)())return{message:"Sesi berakhir, silakan login kembali"};try{await (0,M.checkPermission)(dG.PERMISSIONS.MANAGE_MEDIA);let a=(0,L.join)(process.cwd(),"public"),b=0,c=await I.db.select({url:J.medias.url}).from(J.medias),d=new Set(c.map(a=>a.url)),e=async c=>{let f=(0,L.join)(a,c);for(let g of(await (0,K.readdir)(f,{withFileTypes:!0}))){let f=(0,L.join)(c,g.name),h=`/${f.replace(/\\/g,"/")}`;if(g.isDirectory())await e(f);else if(!d.has(h)){let d=await (0,K.stat)((0,L.join)(a,f)),e=g.name.split(".").pop()?.toLowerCase(),i="other";["jpg","jpeg","png","gif","webp","svg"].includes(e||"")?i="image":["mp4","webm","ogg"].includes(e||"")?i="video":["pdf","doc","docx"].includes(e||"")?i="document":["mp3","wav"].includes(e||"")&&(i="audio");let j=null,k=c.replace(/\\/g,"/");j=k.startsWith("uploads/")?k.replace("uploads/",""):"uploads"===k?null:k,""===j&&(j=null),await I.db.insert(J.medias).values({name:g.name,fileKey:h,type:i,provider:"local",mimeType:`${i}/${e}`,fileSize:d.size,url:h,metadata:j?{folder:j}:null}),b++}}};for(let b of["uploads"]){let c=(0,L.join)(a,b);try{await (0,K.mkdir)(c,{recursive:!0}),await e(b)}catch(a){console.error(`Failed to sync folder ${b}:`,a)}}return await (0,dJ.createAuditLog)("MEDIA_SYNC",void 0,`Synchronized filesystem. Added ${b} files.`),(0,dH.revalidatePath)("/admin","layout"),{success:!0,message:`Sinkronisasi selesai. ${b} file baru ditambahkan.`,addedCount:b}}catch(a){return console.error("Sync error:",a),{message:"Gagal sinkronisasi: "+(a instanceof Error?a.message:"Terjadi kesalahan")}}}(0,a.i(98246).ensureServerEntryExports)([dK,dL,dM,dN,dO,dP,dQ,dR]),(0,H.registerServerReference)(dK,"0039e6f4d93c612e9432cd78ee8cbc92260a14fa7c",null),(0,H.registerServerReference)(dL,"406ff7d3af401edf92b2984e240871274e46bb3446",null),(0,H.registerServerReference)(dM,"40c944e5b0c4c33ee1ee96067b7c69a49106edc40b",null),(0,H.registerServerReference)(dN,"40d1fbcb5529ac8f2bc18816eb1d3c478818f9fbe2",null),(0,H.registerServerReference)(dO,"4020377e801a0cc64e1a42febf16bf8e4995f2cf7f",null),(0,H.registerServerReference)(dP,"00cfd698a314c7d2a63fa7bd7fa56ea7cf3febe247",null),(0,H.registerServerReference)(dQ,"60a088e6d105144a94fa2824812100df7fdd6a8818",null),(0,H.registerServerReference)(dR,"00407ab671b4a0818fff7ed31ffb79f10f964adcd8",null),a.s(["createPhysicalFolder",()=>dL,"deleteMedia",()=>dO,"deletePhysicalFolder",()=>dM,"getMedias",()=>dP,"getPhysicalFolders",()=>dK,"syncFileSystemMedias",()=>dR,"updateMediaFolder",()=>dQ,"uploadFile",()=>dN],73492)}];

//# sourceMappingURL=_51560655._.js.map