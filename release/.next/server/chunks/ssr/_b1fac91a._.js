module.exports=[434,a=>{"use strict";let b=(0,a.i(72873).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);a.s(["Upload",()=>b],434)},10235,a=>{"use strict";let b=(0,a.i(72873).default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);a.s(["Image",()=>b],10235)},55736,32994,a=>{"use strict";let b=(0,a.i(72873).default)("library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);a.s(["Library",()=>b],55736);var c=a.i(50586),d=a.i(92989),e=a.i(53273),f=a.i(96438),g=a.i(98416);function h({onSelect:a,allMedias:b,trigger:h}){let[i,j]=(0,d.useState)(!1);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{onClick:()=>j(!0),children:h||(0,c.jsx)(f.Button,{type:"button",variant:"outline",children:"Pilih dari Library"})}),i&&(0,c.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-6",children:[(0,c.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>j(!1)}),(0,c.jsxs)("div",{className:"relative bg-white w-full max-w-6xl max-h-[90vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-neutral-100",children:[(0,c.jsx)("h3",{className:"text-xl font-bold text-neutral-900",children:"Pilih Media"}),(0,c.jsx)("button",{onClick:()=>j(!1),className:"text-neutral-400 hover:text-neutral-600 transition-colors",children:(0,c.jsx)(g.X,{size:24})})]}),(0,c.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,c.jsx)("div",{className:"p-6",children:(0,c.jsx)(e.MediaLibrary,{initialMedias:b,allowSelection:!0,onSelect:b=>{a(b),j(!1)}})})}),(0,c.jsx)("div",{className:"p-4 bg-neutral-50 border-t text-center text-xs text-neutral-500",children:'Pilih media lalu klik "Gunakan Media" untuk mengonfirmasi.'})]})]})]})}a.s(["MediaSelector",()=>h],32994)},49892,a=>{"use strict";let b=(0,a.i(72873).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);a.s(["Save",()=>b],49892)},52693,a=>{"use strict";var b=a.i(50586),c=a.i(92989),d=a.i(25246),e=a.i(64706);function f({node:a,renderLabel:g,level:h=0,defaultExpanded:i=!1}){let[j,k]=(0,c.useState)(i),l=a.children&&a.children.length>0;return(0,b.jsxs)("div",{className:"flex flex-col select-none",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 py-1",style:{paddingLeft:`${12*h}px`},children:[(0,b.jsx)("button",{type:"button",onClick:()=>l&&k(!j),className:`p-1 rounded hover:bg-neutral-100 text-neutral-400 transition-colors ${!l?"opacity-0 cursor-default":""}`,children:j?(0,b.jsx)(e.ChevronDown,{size:14}):(0,b.jsx)(d.ChevronRight,{size:14})}),(0,b.jsx)("div",{className:"flex-1 min-w-0",children:g(a)})]}),l&&j&&(0,b.jsx)("div",{className:"flex flex-col",children:a.children.map(a=>(0,b.jsx)(f,{node:a,renderLabel:g,level:h+1,defaultExpanded:i},a.id))})]})}function g({nodes:a,renderLabel:c,defaultExpanded:d=!1,className:e=""}){return(0,b.jsx)("div",{className:`flex flex-col ${e}`,children:a.map(a=>(0,b.jsx)(f,{node:a,renderLabel:c,defaultExpanded:d},a.id))})}a.s(["CollapsibleTree",()=>g])},84285,a=>{"use strict";let b=(0,a.i(72873).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>b],84285)},17507,a=>{"use strict";let b=(0,a.i(72873).default)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);a.s(["Folder",()=>b],17507)},9394,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={default:function(){return k},getImageProps:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(63652),g=a.r(30775),h=a.r(59639),i=f._(a.r(6047));function j(a){let{props:b}=(0,g.getImgProps)(a,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[a,c]of Object.entries(b))void 0===c&&delete b[a];return{props:b}}let k=h.Image},55516,(a,b,c)=>{b.exports=a.r(9394)},43102,a=>{"use strict";var b=a.i(50586),c=a.i(55516),d=a.i(68114);function e({src:a,alt:e,className:f,fill:g,sizes:h,...i}){return a?(0,b.jsx)(c.default,{src:a,alt:e,fill:g,sizes:h||(g?"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw":void 0),className:(0,d.cn)("object-cover object-center",f),...i}):null}a.s(["AppImage",()=>e])},25246,a=>{"use strict";let b=(0,a.i(72873).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);a.s(["ChevronRight",()=>b],25246)},76968,a=>{"use strict";var b=a.i(50586),c=a.i(92989),d=a.i(96438),e=a.i(49892),f=a.i(434),g=a.i(10235),h=a.i(98416),i=a.i(55736),j=a.i(17691),k=a.i(43102),l=a.i(74949),m=a.i(32994),n=a.i(99343),o=a.i(37258),p=a.i(68114);function q({action:a,initialData:q,allMedias:r}){let[s,t,u]=(0,c.useActionState)(a,{}),[v,w]=(0,c.useState)(null);(0,c.useEffect)(()=>{s?.message&&(s.success?o.toast.success(s.message):o.toast.error(s.message))},[s]);let[x,y]=(0,c.useState)(q?.name||""),[z,A]=(0,c.useState)(q?.slug||""),[B,C]=(0,c.useState)(q?.logoUrl||""),[D,E]=(0,c.useState)(!1),F=(0,c.useRef)(null),G=async a=>{if(!a)return;E(!0);let b=new FormData;b.append("file",a);try{let a=new XMLHttpRequest;F.current=a;let c=new Promise((c,d)=>{a.open("POST","/api/media/upload"),a.onload=()=>{a.status>=200&&a.status<300?c(JSON.parse(a.responseText)):d(Error(a.statusText))},a.onerror=()=>d(Error("Network error")),a.onabort=()=>d("ABORTED"),a.send(b)}),d=await c;F.current=null,E(!1),d.url&&C(d.url)}catch(a){if("ABORTED"===a)return;E(!1),F.current=null,console.error("Upload error:",a),o.toast.error("Gagal mengunggah logo.")}};return(0,b.jsxs)("form",{action:t,className:"flex flex-col gap-8 w-full pb-32",children:[(0,b.jsx)("input",{type:"hidden",name:"logoUrl",value:B||""}),(0,b.jsx)(n.MediaDetailsModal,{isOpen:!!v,onClose:()=>w(null),media:v}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-brand shadow-sm border border-neutral-200",children:[(0,b.jsx)("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:(0,b.jsx)("h2",{className:"text-lg font-bold text-neutral-900",children:"Informasi Brand"})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)("label",{className:"text-sm font-bold text-neutral-700",children:"Nama Brand"}),(0,b.jsx)("input",{name:"name",value:x,onChange:a=>{let b=a.target.value;y(b),q?.slug||A(b.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""))},className:"p-2 border rounded",required:!0}),s?.error?.name&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:s.error.name[0]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)("label",{className:"text-sm font-bold text-neutral-700",children:"Slug (Otomatis)"}),(0,b.jsx)("input",{name:"slug",value:z,readOnly:!0,className:"p-2 border rounded bg-neutral-100 text-neutral-500 cursor-not-allowed"}),s?.error?.slug&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:s.error.slug[0]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2 md:col-span-2",children:[(0,b.jsx)("label",{className:"text-sm font-bold text-neutral-700",children:"Website"}),(0,b.jsx)("input",{name:"website",defaultValue:q?.website??"",className:"p-2 border rounded",placeholder:"https://example.com"}),s?.error?.website&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:s.error.website[0]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2 md:col-span-2",children:[(0,b.jsx)("label",{className:"text-sm font-bold text-neutral-700",children:"Logo Brand"}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-6 items-start p-6 bg-neutral-50 rounded-xl border border-neutral-200",children:[(0,b.jsxs)("div",{className:`relative w-32 h-32 flex-shrink-0 rounded-lg bg-white border border-neutral-200 shadow-inner overflow-hidden flex items-center justify-center group/preview ${B?"cursor-pointer":""}`,onClick:()=>{if(!B)return;let a=r.find(a=>a.url===B);a&&w(a)},children:[B?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.AppImage,{src:(0,p.getDisplayUrl)(r.find(a=>a.url===B)||{url:B,type:"image"}),alt:"Preview",fill:!0,className:"object-contain p-3"}),(0,b.jsx)("button",{type:"button",onClick:a=>{a.stopPropagation(),C("")},className:"absolute top-2 right-2 bg-red-500 text-white p-1.5 rounded-full shadow-lg opacity-100 md:opacity-0 md:group-hover/preview:opacity-100 transition-opacity z-10",title:"Hapus Logo",children:(0,b.jsx)(h.X,{size:14})}),(0,b.jsx)("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover/preview:opacity-100 transition-opacity",children:(0,b.jsx)(j.Search,{size:24,className:"text-white"})})]}):(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2 text-neutral-300",children:[(0,b.jsx)(g.Image,{size:32}),(0,b.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"No Logo"})]}),D&&(0,b.jsxs)("div",{className:"absolute inset-0 bg-black/60 flex flex-col items-center justify-center gap-2 p-2",children:[(0,b.jsx)("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,b.jsx)("span",{className:"text-[10px] text-white font-bold uppercase",children:"Uploading..."}),(0,b.jsx)("button",{type:"button",onClick:()=>{F.current&&(F.current.abort(),F.current=null,E(!1),o.toast.info("Unggahan dibatalkan"))},className:"mt-1 text-[8px] text-white font-black uppercase bg-red-600 px-2 py-0.5 rounded hover:bg-red-700 transition-colors",children:"Batal"})]})]}),(0,b.jsxs)("div",{className:"flex-1 w-full flex flex-col gap-4 justify-center h-full pt-2",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)("p",{className:"text-sm font-bold text-neutral-600",children:"Pilih Identitas Brand"}),(0,b.jsx)("p",{className:"text-xs text-neutral-400",children:"Gunakan logo dengan latar belakang transparan (SVG/PNG) untuk hasil terbaik."})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,b.jsx)(m.MediaSelector,{allMedias:r,onSelect:a=>C(a.url),trigger:(0,b.jsxs)(d.Button,{type:"button",variant:"outline",className:"gap-2 bg-white border-neutral-200 text-neutral-700 hover:text-brand-green hover:border-brand-green",children:[(0,b.jsx)(i.Library,{size:18}),(0,b.jsx)("span",{children:"Pilih dari Library"})]})}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:"file",className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full z-10",accept:"image/*",onChange:a=>{a.target.files?.[0]&&G(a.target.files[0]),a.target.value=""}}),(0,b.jsxs)(d.Button,{type:"button",variant:"outline",disabled:D,className:"gap-2 bg-white border-neutral-200 text-neutral-700 hover:text-brand-green hover:border-brand-green",children:[(0,b.jsx)(f.Upload,{size:18}),(0,b.jsx)("span",{children:D?"Mengunggah...":"Upload Baru"})]})]})]})]})]})]})]})]}),(0,b.jsxs)("div",{className:"hidden md:flex justify-end gap-4 border-t border-neutral-200 pt-8",children:[(0,b.jsx)(l.default,{href:"/admin/brands",children:(0,b.jsx)(d.Button,{variant:"outline",size:"lg",children:"Batal"})}),(0,b.jsx)(d.Button,{variant:"dark",size:"lg",type:"submit",disabled:u,children:u?"Menyimpan...":"Simpan Brand"})]}),(0,b.jsx)("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-md border-t border-neutral-200 p-4 z-40 flex justify-center shadow-[0_-4px_20px_rgba(0,0,0,0.08)]",children:(0,b.jsxs)("div",{className:"w-full flex items-center justify-between gap-4 px-4",children:[(0,b.jsxs)(l.default,{href:"/admin/brands",className:"text-sm font-bold text-neutral-500 hover:text-neutral-700 flex items-center gap-1 transition-colors",children:[(0,b.jsx)(h.X,{size:16})," Batal"]}),(0,b.jsxs)(d.Button,{variant:"dark",size:"lg",type:"submit",disabled:u,className:"shadow-lg shadow-brand-green/20 px-8",children:[(0,b.jsx)(e.Save,{size:18,className:"mr-2"}),u?"Simpan...":"Simpan"]})]})})]})}a.s(["BrandForm",()=>q])}];

//# sourceMappingURL=_b1fac91a._.js.map