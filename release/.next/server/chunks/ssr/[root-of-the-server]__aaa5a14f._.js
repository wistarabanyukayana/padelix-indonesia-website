module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},50645,a=>{a.n(a.i(27572))},17537,a=>{a.n(a.i(3363))},2386,a=>{a.n(a.i(52854))},91306,a=>{a.n(a.i(31856))},37022,a=>{a.n(a.i(99382))},13325,a=>{a.n(a.i(54406))},61747,a=>{"use strict";var b=a.i(61469),c=a.i(37137),d=a.i(3766),e=a.i(18961),f=a.i(74340),g=a.i(39138);async function h(){let a=await b.db.select({id:c.products.id,name:c.products.name,slug:c.products.slug,description:c.products.description,basePrice:c.products.basePrice,showPrice:c.products.showPrice}).from(c.products).where((0,d.and)((0,d.eq)(c.products.isActive,!0),(0,d.eq)(c.products.isFeatured,!0))).limit(3),e=[];for(let f of a){let a=await b.db.select({url:c.medias.url,type:c.medias.type,metadata:c.medias.metadata}).from(c.productMedias).innerJoin(c.medias,(0,d.eq)(c.productMedias.mediaId,c.medias.id)).where((0,d.and)((0,d.eq)(c.productMedias.productId,f.id),(0,d.eq)(c.productMedias.isPrimary,!0))).limit(1);e.push({id:f.id,name:f.name,slug:f.slug,description:f.description,price:f.basePrice.toString(),showPrice:f.showPrice,image:a[0]?(0,g.getDisplayUrl)(a[0]):""})}return e}async function i(){let a=await b.db.select({id:c.portfolios.id,title:c.portfolios.title,slug:c.portfolios.slug,location:c.portfolios.location,description:c.portfolios.description}).from(c.portfolios).where((0,d.and)((0,d.eq)(c.portfolios.isActive,!0),(0,d.eq)(c.portfolios.isFeatured,!0))).limit(3),f=[];for(let h of a){let a=await b.db.select({id:c.medias.id,url:c.medias.url,type:c.medias.type,metadata:c.medias.metadata,altText:c.portfolioMedias.altText,isPrimary:c.portfolioMedias.isPrimary,sortOrder:c.portfolioMedias.sortOrder}).from(c.portfolioMedias).innerJoin(c.medias,(0,d.eq)(c.portfolioMedias.mediaId,c.medias.id)).where((0,d.eq)(c.portfolioMedias.portfolioId,h.id)).orderBy((0,e.desc)(c.portfolioMedias.isPrimary),(0,e.desc)(c.portfolioMedias.sortOrder)),i=a.find(a=>a.isPrimary)||a[0];f.push({id:h.id,title:h.title,slug:h.slug,location:h.location,description:h.description,image:i?(0,g.getDisplayUrl)(i):"",medias:a.map(a=>({id:a.id,url:a.url,type:a.type,metadata:(0,g.parseMetadata)(a.metadata),altText:a.altText,isPrimary:a.isPrimary,sortOrder:a.sortOrder}))})}return f}async function j(a){let{query:e,categoryId:f,brandId:h}=a||{},i=(0,d.and)((0,d.eq)(c.products.isActive,!0),e?(0,d.like)(c.products.name,`%${e}%`):void 0,f?(0,d.eq)(c.products.categoryId,f):void 0,h?(0,d.eq)(c.products.brandId,h):void 0),j=await b.db.select({id:c.products.id,name:c.products.name,slug:c.products.slug,description:c.products.description,basePrice:c.products.basePrice,showPrice:c.products.showPrice}).from(c.products).where(i),k=[];for(let a of j){let e=await b.db.select({url:c.medias.url,type:c.medias.type,metadata:c.medias.metadata}).from(c.productMedias).innerJoin(c.medias,(0,d.eq)(c.productMedias.mediaId,c.medias.id)).where((0,d.and)((0,d.eq)(c.productMedias.productId,a.id),(0,d.eq)(c.productMedias.isPrimary,!0))).limit(1);k.push({id:a.id,name:a.name,slug:a.slug,description:a.description,price:a.basePrice.toString(),showPrice:a.showPrice,image:e[0]?(0,g.getDisplayUrl)(e[0]):""})}return k}async function k(){return await b.db.select().from(c.categories)}async function l(){return await b.db.select().from(c.brands)}async function m(a){var h;let i=(h=c.categories,new Proxy(h,new f.TableAliasProxyHandler("parent_categories",!1))),j=await b.db.select({product:c.products,categoryName:c.categories.name,parentCategoryName:i.name,brandName:c.brands.name,brandLogo:c.brands.logoUrl}).from(c.products).leftJoin(c.categories,(0,d.eq)(c.products.categoryId,c.categories.id)).leftJoin(i,(0,d.eq)(c.categories.parentId,i.id)).leftJoin(c.brands,(0,d.eq)(c.products.brandId,c.brands.id)).where((0,d.eq)(c.products.slug,a)).limit(1);if(!j.length)return null;let{product:k,categoryName:l,parentCategoryName:m,brandName:n,brandLogo:o}=j[0],p=await b.db.select({id:c.medias.id,url:c.medias.url,type:c.medias.type,metadata:c.medias.metadata,altText:c.productMedias.altText,isPrimary:c.productMedias.isPrimary,sortOrder:c.productMedias.sortOrder}).from(c.productMedias).innerJoin(c.medias,(0,d.eq)(c.productMedias.mediaId,c.medias.id)).where((0,d.eq)(c.productMedias.productId,k.id)).orderBy((0,e.desc)(c.productMedias.isPrimary),(0,e.desc)(c.productMedias.sortOrder)),q=await b.db.select({key:c.productSpecifications.specKey,value:c.productSpecifications.specValue}).from(c.productSpecifications).where((0,d.eq)(c.productSpecifications.productId,k.id)),r=await b.db.select({id:c.productVariants.id,name:c.productVariants.name,priceAdjustment:c.productVariants.priceAdjustment,sku:c.productVariants.sku,stock:c.productVariants.stockQuantity,isUnlimited:c.productVariants.isUnlimitedStock}).from(c.productVariants).where((0,d.and)((0,d.eq)(c.productVariants.productId,k.id),(0,d.eq)(c.productVariants.isActive,!0)));return{...k,categoryName:l,parentCategoryName:m,brandName:n,brandLogo:o,medias:p.map(a=>({id:a.id,url:a.url,type:a.type,metadata:(0,g.parseMetadata)(a.metadata),altText:a.altText||k.name,isPrimary:a.isPrimary,sortOrder:a.sortOrder})),specs:q,variants:r.map(a=>({...a,priceAdjustment:a.priceAdjustment.toString(),stock:a.stock.toString()}))}}a.s(["getAllProducts",()=>j,"getBrands",()=>l,"getCategories",()=>k,"getFeaturedPortfolios",()=>i,"getFeaturedProducts",()=>h,"getProductBySlug",()=>m],61747)},32793,a=>{"use strict";var b=a.i(76925),c=a.i(71251),d=a.i(89402),e=a.i(54056);function f({product:a}){return(0,b.jsxs)(c.default,{href:`/products/${a.slug}`,className:"bg-white rounded-brand p-6 flex flex-col gap-4 shadow-xl hover:shadow-2xl transition-all group border border-neutral-100 hover:-translate-y-1 duration-300 h-full",children:[(0,b.jsx)("div",{className:"relative aspect-square w-full overflow-hidden rounded-2xl bg-neutral-100",children:(0,b.jsx)(d.AppImage,{src:a.image,alt:a.name,fill:!0,className:"group-hover:scale-110 transition-transform duration-500"})}),(0,b.jsxs)("div",{className:"flex flex-col gap-2 flex-1",children:[(0,b.jsx)("h4",{className:"text-xl font-bold text-neutral-900 group-hover:text-brand-green transition-colors",children:a.name}),a.showPrice?(0,b.jsx)("p",{className:"text-lg font-bold text-brand-green",children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(Number(a.price))}):(0,b.jsx)("p",{className:"text-lg font-bold text-brand-green",children:"Hubungi Kami"}),(0,b.jsx)("p",{className:"text-neutral-500 text-sm line-clamp-2",children:a.description}),(0,b.jsx)("div",{className:"mt-auto pt-2",children:(0,b.jsx)(e.Button,{variant:"outline",size:"sm",className:"w-full pointer-events-none",children:"Detail Produk"})})]})]})}a.s(["ProductCard",()=>f])},23573,a=>{"use strict";a.s(["ProductCategorySidebar",()=>b]);let b=(0,a.i(80846).registerClientReference)(function(){throw Error("Attempted to call ProductCategorySidebar() from the server but ProductCategorySidebar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/products/ProductCategorySidebar.tsx <module evaluation>","ProductCategorySidebar")},48269,a=>{"use strict";a.s(["ProductCategorySidebar",()=>b]);let b=(0,a.i(80846).registerClientReference)(function(){throw Error("Attempted to call ProductCategorySidebar() from the server but ProductCategorySidebar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/products/ProductCategorySidebar.tsx","ProductCategorySidebar")},73880,a=>{"use strict";a.i(23573);var b=a.i(48269);a.n(b)},72387,a=>{"use strict";var b=a.i(76925),c=a.i(61747),d=a.i(54056);function e({message:a}){return(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 text-center bg-neutral-50 rounded-brand border border-neutral-200 dashed-border",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-neutral-200 rounded-full flex items-center justify-center mb-4",children:(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8 text-neutral-400",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})})}),(0,b.jsx)("p",{className:"text-lg text-neutral-500 font-medium",children:a})]})}var f=a.i(32793),g=a.i(71251),h=a.i(73880);async function i({searchParams:a}){let{q:i,category:j,brand:k}=await a,l="string"==typeof i?i:void 0,m="string"==typeof j?Number(j):void 0,n="string"==typeof k?Number(k):void 0,[o,p,q]=await Promise.all([(0,c.getAllProducts)({query:l,categoryId:m,brandId:n}),(0,c.getCategories)(),(0,c.getBrands)()]),r=(a=null)=>p.filter(b=>b.parentId===a).map(a=>({id:a.id,label:a.name,children:r(a.id)})),s=r(null);return(0,b.jsxs)("main",{className:"min-h-screen bg-brand-light",children:[(0,b.jsx)("section",{className:"section bg-brand-green text-neutral-900 pt-16 pb-16",children:(0,b.jsxs)("div",{className:"wrapper text-center gap-4",children:[(0,b.jsx)("h1",{className:"h1",children:"Katalog Produk"}),(0,b.jsx)("p",{className:"text-xl max-w-2xl mx-auto opacity-80 font-medium",children:"Temukan perlengkapan padel terbaik dari brand ternama dunia."})]})}),(0,b.jsx)("section",{className:"section bg-white",children:(0,b.jsxs)("div",{className:"wrapper gap-12 lg:flex-row lg:items-start",children:[(0,b.jsxs)("aside",{className:"w-full lg:w-64 flex flex-col gap-8 shrink-0",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,b.jsx)("h3",{className:"text-sm font-black uppercase tracking-widest text-neutral-400",children:"Cari"}),(0,b.jsxs)("form",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",name:"q",placeholder:"Nama produk...",defaultValue:l,className:"flex-1 p-3 bg-neutral-100 rounded-xl outline-none focus:ring-2 focus:ring-brand-green transition-all text-sm"}),(0,b.jsx)(d.Button,{type:"submit",variant:"dark",size:"sm",children:"Cari"})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,b.jsx)("h3",{className:"text-sm font-black uppercase tracking-widest text-neutral-400",children:"Kategori"}),(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)(g.default,{href:"/products",className:`py-2 text-sm font-bold transition-all border-b border-transparent hover:border-brand-green hover:text-brand-green inline-block ${!m?"text-brand-green border-brand-green":"text-neutral-500"}`,children:"Semua Kategori"}),(0,b.jsx)(h.ProductCategorySidebar,{treeNodes:s})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,b.jsx)("h3",{className:"text-sm font-black uppercase tracking-widest text-neutral-400",children:"Brand"}),(0,b.jsxs)("div",{className:"flex flex-wrap lg:flex-col gap-1",children:[q.map(a=>(0,b.jsx)(g.default,{href:`/products?brand=${a.id}${m?`&category=${m}`:""}${l?`&q=${l}`:""}`,className:`px-4 py-2 rounded-xl text-sm font-bold transition-all border ${n===a.id?"bg-brand-green border-brand-green text-white shadow-md":"bg-white border-transparent text-neutral-500 hover:text-brand-green"}`,children:a.name},a.id)),n&&(0,b.jsx)(g.default,{href:"/products",className:"px-4 py-2 text-xs text-red-500 font-bold hover:underline mt-1",children:"Hapus Filter Brand"})]})]})]}),(0,b.jsxs)("div",{className:"flex-1 flex flex-col gap-8",children:[(0,b.jsx)("div",{className:"flex justify-between items-center border-b border-neutral-100 pb-4",children:(0,b.jsxs)("p",{className:"text-sm text-neutral-400 font-medium",children:["Menampilkan ",(0,b.jsx)("span",{className:"text-neutral-900 font-bold",children:o.length})," produk"]})}),o.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-8",children:o.map(a=>(0,b.jsx)(f.ProductCard,{product:a},a.id))}):(0,b.jsx)("div",{className:"py-20 w-full",children:(0,b.jsx)(e,{message:l||m||n?"Tidak ada produk yang sesuai dengan kriteria Anda.":"Belum ada produk"})})]})]})})]})}a.s(["default",()=>i],72387)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__aaa5a14f._.js.map